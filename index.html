<!DOCTYPE html>
<html lang="zh-CN">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>æ™ºèƒ½è†³é£Ÿè¥å…»è¿½è¸ªå¹³å° V4.4</title>
    <style>
/* ===== Minecraft UI Cartoon Pixel Style ===== */
body {
    font-family: 'Segoe UI', 'å¾®è½¯é›…é»‘', 'Arial', sans-serif;
    background: repeating-linear-gradient(135deg, #90c272 0 40px, #b5dca6 40px 80px, #7fc4c6 80px 120px, #bcdcff 120px 160px);
    min-height: 100vh;
    color: #343421;
    padding: min(2vw, 32px);
}

/* æ–¹å—ç«‹ä½“æ„Ÿå¤§è¾¹æ¡†å’Œé˜´å½± */
.interface, .data-page {
    background: #e3e3e3;
    border: 4px solid #639643;
    border-radius: 0;
    box-shadow: 8px 8px 0 #b39a69, 0 8px 32px 0 #8fc87733;
    padding: min(5vw, 40px) min(5vw, 44px) min(4vw, 32px) min(5vw, 44px);
    margin-bottom: 20px;
    transition: box-shadow 0.18s;
    width: 100%;
    box-sizing: border-box;
}

.main-page {
    background: none;
    border: none;
    box-shadow: none;
    padding: 0;
}

.app-header {
    background: #a6d08c;
    border: 4px solid #639643;
    border-bottom: none;
    box-shadow: 0 6px 0 #b39a69;
    padding: 10px 24px 10px 24px;
    display: flex;
    align-items: center;
    justify-content: space-between;
    color: #2e5714;
    border-radius: 0;
    font-family: 'Segoe UI', 'å¾®è½¯é›…é»‘', sans-serif;
}

.title {
    font-size: 2.2rem;
    font-weight: 700;
    letter-spacing: 2px;
    color: #397d1c;
    text-shadow: 2px 2px 0 #b6e69b, 4px 4px 0 #fff4a3;
    font-family: inherit;
}

/* åƒç´ ç«‹ä½“æŒ‰é’® */
.icon-btn {
    width: 44px; height: 44px; 
    border: 3px solid #397d1c;
    background: #6ad64d;
    color: #fff4a3;
    font-size: 24px; cursor: pointer;
    display: inline-flex; align-items: center; justify-content: center;
    margin-left: 6px; margin-right: 0;
    box-shadow: 3px 3px 0 #b39a69, 0 0 0 #fff4a3;
    border-radius: 0; /* æ–¹å— */
    transition: background 0.12s, color 0.15s, box-shadow 0.12s;
}
.icon-btn:hover {
    background: #fff4a3;
    color: #639643;
    box-shadow: 1px 1px 0 #b39a69, 2px 2px 0 #fff4a3;
}

/* èœå•ä¸‹æ‹‰ä¹Ÿæœ‰æ–¹å—é£æ ¼ */
.nav-content {
    background: #d6ffd2;
    border: 3px solid #639643;
    box-shadow: 4px 4px 0 #b39a69;
    border-radius: 0;
    top: 44px;
    min-width: 128px;
}
.nav-content a {
    color: #397d1c;
    font-size: 17px;
    padding: 14px 18px;
    border-bottom: 2px dashed #b39a69;
    font-weight: 600;
    text-decoration: none;
    display: block;
    font-family: inherit;
    background: transparent;
    letter-spacing: 1px;
    transition: background 0.12s, color 0.12s;
}
.nav-content a:hover {
    background: #fff4a3;
    color: #397d1c;
}

/* è¾“å…¥æ¡†ä¹Ÿæ”¹æˆç²—è¾¹åƒç´ é£ */
input, select, textarea {
    background: #f5f5d7;
    color: #2d3a0a;
    border: 2.5px solid #397d1c;
    border-radius: 0;
    font-family: inherit;
    font-size: 15px;
    box-shadow: 2px 2px 0 #b39a69;
    padding: 9px 10px;
    margin-bottom: 4px;
    outline: none;
    transition: border 0.14s, box-shadow 0.16s;
    width: 100%;
    min-width: 0;
    max-width: 100%;
    box-sizing: border-box;
}
input:focus, select:focus, textarea:focus {
    border-color: #6ad64d;
    background: #fff4a3;
    box-shadow: 0 0 0 3px #e1ffc7;
}

.btn {
    background: #6ad64d;
    color: #343421;
    border: 3px solid #397d1c;
    border-radius: 0;
    font-size: 15px;
    font-weight: 700;
    box-shadow: 2px 2px 0 #b39a69;
    transition: background 0.13s, color 0.14s, box-shadow 0.12s;
    margin-top: 12px;
    text-transform: none;
    letter-spacing: 1px;
    padding: 12px 0;
}
.btn:hover {
    background: #fff4a3;
    color: #639643;
    box-shadow: 1px 1px 0 #b39a69;
}

.interface-title {
    font-size: 1.18rem;
    font-weight: 900;
    color: #397d1c;
    border-bottom: 2px dashed #a6d08c;
    background: #d6ffd2;
    letter-spacing: 2px;
    margin-bottom: 22px;
    padding: 10px 6px;
    text-shadow: 1px 1px 0 #fff4a3;
}

.meal-counter {
    background: #bfffa6;
    border: 2px solid #6ad64d;
    color: #397d1c;
    font-size: 1.05rem;
    font-weight: 700;
    box-shadow: 2px 2px 0 #b39a69;
    border-radius: 0;
    margin-bottom: 16px;
}

/* è¿›åº¦æ¡æ ·å¼ï¼Œåƒç´ é£è‰²å— */
.progress-title {
    font-size: 15px;
    color: #4e660f;
    text-align: left;
    margin-bottom: 12px;
    font-weight: 900;
    letter-spacing: 1px;
}
.progress-section {
    margin: 20px 0 8px 0;
    padding: 10px 4px 10px 4px;
    background: #c1eab8;
    border: 2.5px solid #639643;
    box-shadow: 4px 4px 0 #b39a69;
    border-radius: 0;
}
.progress-item {
    margin-bottom: 13px;
}
.progress-label {
    display: flex; justify-content: space-between; margin-bottom: 4px; font-size: 14px;
    color: #639643; font-weight: 700; letter-spacing: 1px;
}
.progress-bar {
    background: #7fc4c6;
    border: 2px solid #397d1c;
    border-radius: 0;
    height: 18px;
    box-shadow: 2px 2px 0 #b39a69;
    position: relative;
    overflow: visible;
}
.progress-fill {
    height: 100%;
    border-radius: 0;
    transition: width 0.8s;
    position: relative;
}
.progress-fill.calories { background: linear-gradient(90deg, #cfff49, #b5dca6); }
.progress-fill.protein { background: linear-gradient(90deg, #8bff91, #41b348); }
.progress-fill.carbs { background: linear-gradient(90deg, #ffe082, #fff4a3); }
.progress-fill.fat { background: linear-gradient(90deg, #ffd180, #b77a4c); }
.progress-fill.fiber { background: linear-gradient(90deg, #64b5f6, #bae1ff); }
.progress-overflow {
    position: absolute; top: 0; left:0; height: 100%; width:100%;
    background: repeating-linear-gradient(45deg,rgba(244,67,54,0.3),rgba(244,67,54,0.3) 6px,rgba(244,67,54,0.1) 6px,rgba(244,67,54,0.1) 12px);
    animation: overflow-pulse 2s infinite;
}

.fat-ball {
  transition: transform 0.5s;
  box-sizing: border-box;
  border: 2px solid #ff4d7e;
}

.progress-label-left, .progress-label-right {
  white-space: nowrap;
  overflow: hidden;
  text-overflow: ellipsis;
}

/* è¿›åº¦æ¡é«˜åº¦å¢åŠ ä»¥é€‚åº”æ–‡å­— */
.progress-bar {
  height: 22px;
}

@keyframes overflow-pulse { 0%,100%{opacity:0.6;} 50%{opacity:1;} }

.daily-health-score {
    background: #fff4a3;
    border: 3px solid #b39a69;
    border-radius: 0;
    margin: 15px 0;
    color: #397d1c;
    text-align: center;
    box-shadow: 2px 2px 0 #b39a69;
}
.daily-health-score-value {
    font-size: 2rem; font-weight: 900; color: #41b348;
    letter-spacing: 2px;
    text-shadow: 1px 1px 0 #fff;
}
.daily-health-score-breakdown { margin-top: 10px; font-size: 13px; color: #639643; }

.input-format-hint {
    font-size: 12px;
    color: #639643;
    margin-top: 6px;
    padding: 7px;
    background: #fffde9;
    border-radius: 0;
    border-left: 4px solid #b39a69;
}

.form-group label {
    font-size: 15px; color: #639643; font-weight: 600; margin-bottom: 7px;
}
.form-group {
    display: flex;
    align-items: center;
    margin-bottom: 20px;
}
.form-group label {
    width: 100px;
    min-width: 70px;
    margin-right: 16px;
    text-align: right;
    flex-shrink: 0;
}
.form-group input,
.form-group select,
.form-group textarea {
    flex: 1 1 auto;
    width: 100%;
    min-width: 0;
    max-width: 100%;
    box-sizing: border-box;
}

.form-group {
    display: flex;
    align-items: center;
    margin-bottom: 20px;
}

.form-group label {
    width: 100px;
    min-width: 70px;
    margin-right: 16px;
    text-align: right;
    flex-shrink: 0;
}

.log-entry, .recommendation-item, .nutrition-accuracy-info {
    background: #d6ffd2;
    border: 2px solid #639643;
    border-radius: 0;
    margin: 5px 0;
    color: #397d1c;
    font-size: 13px;
    box-shadow: 2px 2px 0 #b39a69;
}

.hidden { display: none !important; }
.main-page {
    width: 100%;
    max-width: 1400px;
    min-width: 320px;
    margin: 2.5vh auto;
    display: flex;
    flex-direction: column;
    gap: 20px;
    box-sizing: border-box;
    padding: 0 min(2vw, 20px);
}
.nav-content { 
    display: none; 
    position: absolute;
    z-index: 1000;
    -webkit-transform: translateZ(0); /* iOSç¡¬ä»¶åŠ é€Ÿ */
    transform: translateZ(0);
}
.nav-dropdown.active .nav-content { 
    display: block !important; /* å¼ºåˆ¶æ˜¾ç¤ºï¼ŒiOSå…¼å®¹ */
}
/* iOS Safariä¸“ç”¨ä¼˜åŒ– */
.icon-btn {
    -webkit-tap-highlight-color: transparent; /* ç§»é™¤iOSç‚¹å‡»é«˜äº® */
    -webkit-touch-callout: none; /* ç¦ç”¨iOSé•¿æŒ‰èœå• */
    -webkit-user-select: none;
    user-select: none;
}

/* æ¡Œé¢ç«¯ä¿ç•™æ‚¬åœæ•ˆæœ */
@media (hover: hover) and (pointer: fine) {
    .nav-dropdown:hover .nav-content { 
        display: block; 
    }
}

/* ç§»åŠ¨ç«¯ç¦ç”¨æ‚¬åœæ•ˆæœ */
@media (hover: none) and (pointer: coarse) {
    .nav-dropdown:hover .nav-content { 
        display: none; 
    }
}

/* å“åº”å¼è®¾è®¡ */
@media (max-width: 768px) {
    .interface {
        padding: 20px 16px 16px 16px;
        margin-bottom: 16px;
    }
    
    .app-header {
        padding: 8px 16px;
    }
    
    .title {
        font-size: 1.5rem;
    }
    
    .main-page {
        padding: 0 10px;
        gap: 16px;
    }
    
    .form-group {
        flex-direction: column;
        align-items: stretch;
    }
    
    .form-group label {
        text-align: left;
        margin-bottom: 8px;
        width: 100%;
    }
    
    input, select, textarea {
        min-width: auto;
        width: 100%;
    }

@media (max-width: 480px) {
    .interface {
        padding: 16px 12px;
    }
    
    .title {
        font-size: 1.2rem;
        letter-spacing: 1px;
    }
    
    .interface-title {
        font-size: 1rem;
        padding: 8px 4px;
        margin-bottom: 16px;
    }
    
    .progress-section {
        padding: 8px 4px;
    }
}

.mc-btn-row {
  width: 100%;
  max-width: 900px;
  margin: 0 auto 16px auto;
  display: flex;
  justify-content: center;
  gap: 18px;
}

.mc-btn {
  min-width: 80px;
  min-height: 60px;
  background: #e3e3e3;
  color: #265c21;
  border: 3.5px solid #639643;
  box-shadow: 4px 4px 0 #b39a69, 0 6px 24px #8fc87733;
  border-radius: 0;
  font-size: 1.15rem;
  font-weight: 700;
  letter-spacing: 2px;
  text-shadow: 1.5px 1.5px 0 #fff4a3, 3px 3px 0 #b6e69b;
  font-family: inherit;
  cursor: pointer;
  margin: 0;
  outline: none;
  transition: background 0.12s, color 0.13s, box-shadow 0.15s;
  position: relative;
}

.mc-btn:active, .mc-btn.selected {
  background: #fff4a3;
  color: #397d1c;
  box-shadow: 1px 1px 0 #b39a69;
}

.mc-tab-content {
  min-height: 280px;
  width: 100%;
  max-width: 900px;
  margin-left: auto;
  margin-right: auto;
  background: #f8ffe7;
  border: 3.5px solid #639643;
  box-shadow: 8px 8px 0 #b39a69, 0 8px 32px 0 #8fc87722;
  border-radius: 0;
  padding: 28px 24px;
  display: flex;
  flex-direction: column;
  align-items: center;
  justify-content: flex-start;
  font-size: 1.02rem;
  color: #265c21;
  overflow-x: auto;
  min-width: 260px;
  box-sizing: border-box; /* æ–°å¢ï¼Œå…³é”®ï¼ä¿è¯è¾¹æ¡†éšå®½åº¦å¯¹ç§° */
}

@media (max-width: 768px) {
  .mc-btn-row { gap: 8px; }
  .mc-btn { min-width: 54px; min-height: 46px; font-size: 0.95rem; padding: 0 8px;}
  .mc-tab-content { padding: 18px 4vw; font-size: 0.97rem;}
}
.data-screen-box {
  width: 100%;
  min-height: 180px;
  min-width: 220px;
  max-width: 100%;
  margin: 0 auto;
  background: #ecf0e8;
  border: 5px inset #bfc8b4;
  box-shadow: 0 2px 18px #8fc87733, inset 0 1.5px 8px #dde6d2;
  border-radius: 10px;
  padding: 32px 20px;
  display: flex;
  flex-direction: column;
  align-items: stretch;
  justify-content: flex-start;
  font-size: 1.07rem;
  color: #265c21;
  transition: background 0.2s, box-shadow 0.15s;
  overflow-x: auto;
  box-sizing: border-box;
}
@media (max-width: 768px) {
  .data-screen-box {
    padding: 14px 5px;
    font-size: 0.97rem;
    border-radius: 7px;
  }
}
    </style>
</head>
<body>
<div class="app-header" style="display:flex;align-items:center;justify-content:space-between;position:relative;margin-bottom:20px;">
  <div class="title" style="font-size:2rem;font-weight:600;color:#64b5f6;letter-spacing:2px;">Trii 4.5</div>
  <div class="header-buttons" style="display:flex;gap:10px;align-items:center;">
    <div class="nav-dropdown" style="position:relative;">
<button class="icon-btn" id="navMenuBtn" title="èœå•">â˜°</button>
     <div class="nav-content" style="right:0;left:auto;top:42px;">
  <a href="#" data-action="mainPage">ä¸»é¡µ</a>
  <a href="#" data-action="dataPage">æ•°æ®é¡µ</a>
  <a href="#" data-action="reset">é‡ç½®</a>
</div>
    </div>
  </div>
</div>
<div class="main-page" id="mainPage">
  <!-- ç”¨æˆ·ä¿¡æ¯åŒºåŸŸï¼ˆé¦–æ¬¡è¿›å…¥æ‰æ˜¾ç¤ºï¼Œåç»­éšè—ï¼‰ -->
  <div class="interface interface-a" id="personalInfoArea">
      <div class="interface-title">ğŸ“± ç”¨æˆ·ä¿¡æ¯ä¸è¥å…»è®¡åˆ’</div>
      <div id="personalInfo">
        <div class="form-group">
            <label>ğŸ‘¤ æ€§åˆ«</label>
            <select id="gender">
                <option value="">è¯·é€‰æ‹©æ€§åˆ«</option>
                <option value="male">ğŸ‘¨ ç”·æ€§</option>
                <option value="female">ğŸ‘© å¥³æ€§</option>
            </select>
        </div>
        <div class="form-group">
            <label>ğŸ“ èº«é«˜ (cm)</label>
            <input type="number" id="height" placeholder="è¯·è¾“å…¥èº«é«˜ï¼Œå¦‚175" min="100" max="250">
        </div>
<div class="form-group">
    <label>âš–ï¸ ä½“é‡ (kg)</label>
    <input type="number" id="weight" placeholder="è¯·è¾“å…¥ä½“é‡ï¼Œå¦‚70" min="30" max="300">
</div>
        <div class="form-group">
            <label>ğŸ‚ å¹´é¾„</label>
            <input type="number" id="age" placeholder="è¯·è¾“å…¥å¹´é¾„ï¼Œå¦‚28" min="16" max="100">
        </div>
        <div class="form-group">
            <label>ğŸ¯ å¥åº·ç›®æ ‡</label>
            <select id="goal">
                <option value="">è¯·é€‰æ‹©æ‚¨çš„ç›®æ ‡</option>
                <option value="lose">ğŸ”¥ å‡è„‚ç˜¦èº«</option>
                <option value="gain">ğŸ’ª å¢è‚Œå¡‘å½¢</option>
                <option value="balance">âš–ï¸ å¹³è¡¡è¥å…»</option>
            </select>
        </div>
        <button class="btn" id="btnGenPlan">ç”Ÿæˆä¸ªæ€§åŒ–è¥å…»è®¡åˆ’</button>
      </div>
  </div>

  <!-- å½•å…¥åŒºåŸŸï¼Œä¿¡æ¯å½•å…¥åå¸¸é©»ä¸Šæ–¹ -->

<div class="interface" id="mealInputArea" style="margin-top:0; display:none; padding-top:15px; padding-bottom:15px;">
  <div id="mealInput" style="display:flex; flex-direction:column; gap:10px;">
    <div class="meal-counter" style="margin-bottom:10px;">
        ä»Šæ—¥ç¬¬ <span id="mealNumber">1</span> é¤ï¼ˆå»ºè®®æ¯æ—¥2-5é¤ï¼‰
    </div>
    <div style="display:flex; gap:10px; align-items:center;">
      <button class="btn" id="btnRandomMeal" type="button" style="flex:1; height:44px;">ğŸ² éšæœºç”Ÿæˆä¸€é¤</button>
      <textarea id="mealInputRaw" placeholder="å¦‚ï¼š20250527-0830-32-ä¸¤ä¸ªåŒ…å­ï¼Œç‚’çŒªè‚‰200gï¼Œè‰è“80g" rows="2" style="flex:2;"></textarea>
      <button class="btn" onclick="submitMeal()" style="flex:1;">å½•å…¥æœ¬é¤æ•°æ®</button>
      <button class="btn" id="btnFeedSnake" style="flex:1; background-color:#e25555; cursor:not-allowed;" disabled>æŠ•å–‚å°è›‡</button>
    </div>
    <div id="mealFeedback" style="margin-top:8px;"></div>
  </div>
</div>

<!-- è¿›åº¦æ¡ä¸å¥åº·åˆ†åŒºåŸŸï¼Œå®æ—¶åé¦ˆ -->
<div class="interface" id="progressHealthArea" style="margin-top:0; padding-top:10px; padding-bottom:15px; display:none;">
  <div id="progressSection" class="progress-section" style="margin:0; padding:8px 4px;">
    <div class="progress-title" style="margin-bottom:8px;">è¥å…»è¾¾æˆè¿›åº¦</div>
    <div class="progress-item" style="margin-bottom:10px;">
      <div class="progress-bar" style="position:relative;">
        <div class="progress-label-left" style="position:absolute; left:5px; top:0; font-size:12px; color:#fff; line-height:18px; z-index:2; text-shadow:0 0 2px #000;">å¡è·¯é‡Œ</div>
        <div class="progress-fill calories" id="progressCalories"></div>
        <div class="progress-label-right" style="position:absolute; right:5px; top:0; font-size:12px; color:#fff; line-height:18px; z-index:2; text-shadow:0 0 2px #000;" id="progressCaloriesValue"></div>
      </div>
    </div>
    <div class="progress-item" style="margin-bottom:10px;">
      <div class="progress-bar" style="position:relative;">
        <div class="progress-label-left" style="position:absolute; left:5px; top:0; font-size:12px; color:#fff; line-height:18px; z-index:2; text-shadow:0 0 2px #000;">è›‹ç™½è´¨</div>
        <div class="progress-fill protein" id="progressProtein"></div>
        <div class="progress-label-right" style="position:absolute; right:5px; top:0; font-size:12px; color:#fff; line-height:18px; z-index:2; text-shadow:0 0 2px #000;" id="progressProteinValue"></div>
      </div>
    </div>
    <div class="progress-item" style="margin-bottom:10px;">
      <div class="progress-bar" style="position:relative;">
        <div class="progress-label-left" style="position:absolute; left:5px; top:0; font-size:12px; color:#fff; line-height:18px; z-index:2; text-shadow:0 0 2px #000;">ç¢³æ°´</div>
        <div class="progress-fill carbs" id="progressCarbs"></div>
        <div class="progress-label-right" style="position:absolute; right:5px; top:0; font-size:12px; color:#fff; line-height:18px; z-index:2; text-shadow:0 0 2px #000;" id="progressCarbsValue"></div>
      </div>
    </div>
    <div class="progress-item" style="margin-bottom:10px;">
      <div class="progress-bar" style="position:relative;">
        <div class="progress-label-left" style="position:absolute; left:5px; top:0; font-size:12px; color:#fff; line-height:18px; z-index:2; text-shadow:0 0 2px #000;">è„‚è‚ª</div>
        <div class="progress-fill fat" id="progressFat"></div>
        <div id="fatBallsContainer" style="position:absolute; top:0; left:0; height:100%; display:none;"></div>
        <div class="progress-label-right" style="position:absolute; right:5px; top:0; font-size:12px; color:#fff; line-height:18px; z-index:2; text-shadow:0 0 2px #000;" id="progressFatValue"></div>
      </div>
    </div>
    <div class="progress-item" style="margin-bottom:5px;">
      <div class="progress-bar" style="position:relative;">
        <div class="progress-label-left" style="position:absolute; left:5px; top:0; font-size:12px; color:#fff; line-height:18px; z-index:2; text-shadow:0 0 2px #000;">è†³é£Ÿçº¤ç»´</div>
        <div class="progress-fill fiber" id="progressFiber"></div>
        <div class="progress-label-right" style="position:absolute; right:5px; top:0; font-size:12px; color:#fff; line-height:18px; z-index:2; text-shadow:0 0 2px #000;" id="progressFiberValue"></div>
      </div>
    </div>
  </div> 
  <div class="daily-health-score" id="dailyHealthScore" style="display:none; margin-top:12px; padding:8px 0;">
    <div>ä»Šæ—¥å¥åº·è¯„åˆ†</div>
    <div class="daily-health-score-value" id="healthScoreValue">-</div>
    <div class="daily-health-score-breakdown" id="healthScoreBreakdown"></div>
  </div>
</div>
    <!-- æ•°æ®åˆ†æé¡µé¢ -->
    <div class="data-page" id="dataPage" style="display: none;">
        <div class="interface interface-c">
            <div class="interface-title">ğŸ“Š è¥å…»æ•°æ®åˆ†æä¸å¥åº·è¶‹åŠ¿</div>
<div class="mc-btn-row" style="display: flex; justify-content: center; gap: 16px; margin: 18px 0 24px 0;">
  <button class="mc-btn" id="btnOverview">æ€»è§ˆ</button>
  <button class="mc-btn" id="btnSearch">æ£€ç´¢</button>
  <button class="mc-btn" id="btnScore">åˆ†æ•°</button>
  <button class="mc-btn" id="btnTrend">è¶‹åŠ¿</button>
</div>
<div class="mc-tab-content">
  <div id="dataScreenBox" class="data-screen-box"></div>
</div>
        </div>
    </div>
<script>
// === USDAå…¨é‡é£Ÿç‰©æ•°æ®åº“ç»“æ„ç¤ºä¾‹ï¼ˆè¯·ç”¨å®Œæ•´æ•°æ®æ›¿æ¢...ï¼‰===
const foodDatabase = {
    // === æ°´æœç±»ï¼ˆåŸºäºUSDAæ•°æ®ï¼‰===
    'é¦™è•‰': { 
        calories: 89, protein: 1.1, carbs: 22.8, fat: 0.3, fiber: 2.6, processing: 1,
        vitaminA: 3, vitaminC: 8.7, vitaminE: 0.10, vitaminB1: 0.03, vitaminB2: 0.07, vitaminB6: 0.37, folate: 20,
        calcium: 5, iron: 0.26, magnesium: 27, phosphorus: 22, potassium: 358, sodium: 1, zinc: 0.15
    },
    'è‹¹æœ': { 
        calories: 52, protein: 0.3, carbs: 13.8, fat: 0.2, fiber: 2.4, processing: 1,
        vitaminA: 3, vitaminC: 4.6, vitaminE: 0.18, vitaminB1: 0.02, vitaminB2: 0.03, vitaminB6: 0.04, folate: 3,
        calcium: 6, iron: 0.12, magnesium: 5, phosphorus: 11, potassium: 107, sodium: 1, zinc: 0.04
    },
    'æ©™å­': { 
        calories: 47, protein: 0.9, carbs: 11.8, fat: 0.1, fiber: 2.4, processing: 1,
        vitaminA: 11, vitaminC: 53.2, vitaminE: 0.18, vitaminB1: 0.09, vitaminB2: 0.04, vitaminB6: 0.06, folate: 40,
        calcium: 40, iron: 0.10, magnesium: 10, phosphorus: 14, potassium: 181, sodium: 0, zinc: 0.07
    },
    'æ¢¨': { 
        calories: 57, protein: 0.4, carbs: 15.2, fat: 0.1, fiber: 3.1, processing: 1,
        vitaminA: 1, vitaminC: 4.3, vitaminE: 0.12, vitaminB1: 0.01, vitaminB2: 0.03, vitaminB6: 0.03, folate: 7,
        calcium: 9, iron: 0.18, magnesium: 7, phosphorus: 12, potassium: 116, sodium: 1, zinc: 0.10
    },
    'è‘¡è„': { 
        calories: 67, protein: 0.6, carbs: 17.2, fat: 0.2, fiber: 0.9, processing: 1,
        vitaminA: 3, vitaminC: 10.8, vitaminE: 0.19, vitaminB1: 0.07, vitaminB2: 0.07, vitaminB6: 0.09, folate: 2,
        calcium: 10, iron: 0.36, magnesium: 7, phosphorus: 20, potassium: 191, sodium: 3, zinc: 0.07
    },
    'è¥¿ç“œ': { 
        calories: 30, protein: 0.6, carbs: 7.6, fat: 0.2, fiber: 0.4, processing: 1,
        vitaminA: 28, vitaminC: 8.1, vitaminE: 0.05, vitaminB1: 0.03, vitaminB2: 0.02, vitaminB6: 0.05, folate: 3,
        calcium: 7, iron: 0.24, magnesium: 10, phosphorus: 11, potassium: 112, sodium: 1, zinc: 0.10
    },
    'è‰è“': { 
        calories: 32, protein: 0.7, carbs: 7.7, fat: 0.3, fiber: 2.0, processing: 1,
        vitaminA: 1, vitaminC: 58.8, vitaminE: 0.29, vitaminB1: 0.02, vitaminB2: 0.02, vitaminB6: 0.05, folate: 24,
        calcium: 16, iron: 0.41, magnesium: 13, phosphorus: 24, potassium: 153, sodium: 1, zinc: 0.14
    },
    'è è': { 
        calories: 50, protein: 0.5, carbs: 13.1, fat: 0.1, fiber: 1.4, processing: 1,
        vitaminA: 3, vitaminC: 47.8, vitaminE: 0.02, vitaminB1: 0.08, vitaminB2: 0.03, vitaminB6: 0.11, folate: 18,
        calcium: 13, iron: 0.29, magnesium: 12, phosphorus: 8, potassium: 109, sodium: 1, zinc: 0.12
    },
    'çŒ•çŒ´æ¡ƒ': { 
        calories: 61, protein: 1.1, carbs: 14.7, fat: 0.5, fiber: 3.0, processing: 1,
        vitaminA: 4, vitaminC: 92.7, vitaminE: 1.46, vitaminB1: 0.03, vitaminB2: 0.02, vitaminB6: 0.06, folate: 25,
        calcium: 34, iron: 0.31, magnesium: 17, phosphorus: 34, potassium: 312, sodium: 3, zinc: 0.14
    },
    'æŸšå­': { 
        calories: 32, protein: 0.6, carbs: 8.1, fat: 0.1, fiber: 1.0, processing: 1,
        vitaminA: 1, vitaminC: 61, vitaminE: 0.24, vitaminB1: 0.04, vitaminB2: 0.03, vitaminB6: 0.04, folate: 8,
        calcium: 12, iron: 0.11, magnesium: 8, phosphorus: 8, potassium: 135, sodium: 1, zinc: 0.04
    },
    'æŸ æª¬': { 
        calories: 29, protein: 1.1, carbs: 9.3, fat: 0.3, fiber: 2.8, processing: 1,
        vitaminA: 1, vitaminC: 53, vitaminE: 0.15, vitaminB1: 0.04, vitaminB2: 0.02, vitaminB6: 0.08, folate: 11,
        calcium: 26, iron: 0.6, magnesium: 8, phosphorus: 16, potassium: 138, sodium: 2, zinc: 0.06
    },
    'è“è“': { 
        calories: 57, protein: 0.7, carbs: 14.5, fat: 0.3, fiber: 2.4, processing: 1,
        vitaminA: 3, vitaminC: 9.7, vitaminE: 0.57, vitaminB1: 0.04, vitaminB2: 0.04, vitaminB6: 0.05, folate: 6,
        calcium: 6, iron: 0.28, magnesium: 6, phosphorus: 12, potassium: 77, sodium: 1, zinc: 0.16
    },

    // === ä¸»é£Ÿç±» ===
    'ç±³é¥­': {
        calories: 130, protein: 2.7, carbs: 28.2, fat: 0.3, fiber: 0.4, processing: 2,
        vitaminA: 0, vitaminC: 0, vitaminE: 0.1, vitaminB1: 0.02, vitaminB2: 0.01, vitaminB6: 0.1, folate: 3,
        calcium: 10, iron: 0.2, magnesium: 12, phosphorus: 43, potassium: 35, sodium: 1, zinc: 0.5
    },
    'é¢æ¡': {
        calories: 138, protein: 4.5, carbs: 27.9, fat: 0.9, fiber: 1.4, processing: 2,
        vitaminA: 0, vitaminC: 0, vitaminE: 0.1, vitaminB1: 0.09, vitaminB2: 0.02, vitaminB6: 0.04, folate: 21,
        calcium: 15, iron: 0.5, magnesium: 18, phosphorus: 49, potassium: 44, sodium: 3, zinc: 0.7
    },
    'é¦’å¤´': {
        calories: 221, protein: 7.6, carbs: 46.7, fat: 0.5, fiber: 1.2, processing: 3,
        vitaminA: 0, vitaminC: 0, vitaminE: 0.1, vitaminB1: 0.13, vitaminB2: 0.07, vitaminB6: 0.05, folate: 44,
        calcium: 34, iron: 1.2, magnesium: 21, phosphorus: 71, potassium: 88, sodium: 5, zinc: 0.7
    },
    'å…¨éº¦é¢åŒ…': {
        calories: 247, protein: 12, carbs: 41, fat: 4.2, fiber: 7, processing: 3,
        vitaminA: 1, vitaminC: 0, vitaminE: 0.4, vitaminB1: 0.39, vitaminB2: 0.13, vitaminB6: 0.27, folate: 38,
        calcium: 107, iron: 2.5, magnesium: 90, phosphorus: 200, potassium: 250, sodium: 250, zinc: 1.5
    },
    'ç‡•éº¦ç‰‡': {
        calories: 379, protein: 13.2, carbs: 67.7, fat: 6.5, fiber: 10.1, processing: 2,
        vitaminA: 0, vitaminC: 0, vitaminE: 0.42, vitaminB1: 0.46, vitaminB2: 0.16, vitaminB6: 0.12, folate: 56,
        calcium: 54, iron: 4.7, magnesium: 177, phosphorus: 523, potassium: 429, sodium: 2, zinc: 3.1
    },
    'ç‰ç±³': {
        calories: 96, protein: 3.4, carbs: 21, fat: 1.5, fiber: 2.7, processing: 1,
        vitaminA: 9, vitaminC: 6.8, vitaminE: 0.07, vitaminB1: 0.20, vitaminB2: 0.06, vitaminB6: 0.09, folate: 46,
        calcium: 2, iron: 0.52, magnesium: 37, phosphorus: 89, potassium: 270, sodium: 15, zinc: 0.46
    },
    'çº¢è–¯': {
        calories: 86, protein: 1.6, carbs: 20.1, fat: 0.1, fiber: 3, processing: 1,
        vitaminA: 709, vitaminC: 2.4, vitaminE: 0.26, vitaminB1: 0.11, vitaminB2: 0.03, vitaminB6: 0.21, folate: 11,
        calcium: 30, iron: 0.61, magnesium: 25, phosphorus: 47, potassium: 337, sodium: 55, zinc: 0.3
    },

    // === è”¬èœç±» ===
    'è¥¿å…°èŠ±': {
        calories: 34, protein: 2.8, carbs: 6.6, fat: 0.4, fiber: 2.6, processing: 1,
        vitaminA: 31, vitaminC: 89.2, vitaminE: 0.78, vitaminB1: 0.07, vitaminB2: 0.12, vitaminB6: 0.18, folate: 63,
        calcium: 47, iron: 0.73, magnesium: 21, phosphorus: 66, potassium: 316, sodium: 33, zinc: 0.41
    },
    'è èœ': {
        calories: 23, protein: 2.9, carbs: 3.6, fat: 0.4, fiber: 2.2, processing: 1,
        vitaminA: 469, vitaminC: 28.1, vitaminE: 2.03, vitaminB1: 0.08, vitaminB2: 0.19, vitaminB6: 0.2, folate: 194,
        calcium: 99, iron: 2.71, magnesium: 79, phosphorus: 49, potassium: 558, sodium: 79, zinc: 0.53
    },
    'èƒ¡èåœ': {
        calories: 41, protein: 0.9, carbs: 9.6, fat: 0.2, fiber: 2.8, processing: 1,
        vitaminA: 835, vitaminC: 5.9, vitaminE: 0.66, vitaminB1: 0.07, vitaminB2: 0.05, vitaminB6: 0.13, folate: 19,
        calcium: 33, iron: 0.3, magnesium: 12, phosphorus: 35, potassium: 320, sodium: 69, zinc: 0.24
    },
    'ç•ªèŒ„': {
        calories: 18, protein: 0.9, carbs: 3.9, fat: 0.2, fiber: 1.2, processing: 1,
        vitaminA: 42, vitaminC: 13.7, vitaminE: 0.54, vitaminB1: 0.04, vitaminB2: 0.02, vitaminB6: 0.08, folate: 15,
        calcium: 10, iron: 0.27, magnesium: 11, phosphorus: 24, potassium: 237, sodium: 5, zinc: 0.17
    },
    'é»„ç“œ': {
        calories: 16, protein: 0.7, carbs: 3.6, fat: 0.1, fiber: 0.5, processing: 1,
        vitaminA: 5, vitaminC: 2.8, vitaminE: 0.03, vitaminB1: 0.03, vitaminB2: 0.03, vitaminB6: 0.04, folate: 7,
        calcium: 16, iron: 0.28, magnesium: 13, phosphorus: 24, potassium: 147, sodium: 2, zinc: 0.2
    },
    'åœŸè±†': {
        calories: 77, protein: 2.0, carbs: 17.5, fat: 0.1, fiber: 2.2, processing: 1,
        vitaminA: 0, vitaminC: 19.7, vitaminE: 0.01, vitaminB1: 0.08, vitaminB2: 0.03, vitaminB6: 0.3, folate: 15,
        calcium: 12, iron: 0.81, magnesium: 23, phosphorus: 57, potassium: 429, sodium: 6, zinc: 0.3
    },
    'æ´‹è‘±': {
        calories: 40, protein: 1.1, carbs: 9.3, fat: 0.1, fiber: 1.7, processing: 1,
        vitaminA: 0, vitaminC: 7.4, vitaminE: 0.02, vitaminB1: 0.05, vitaminB2: 0.02, vitaminB6: 0.12, folate: 19,
        calcium: 23, iron: 0.21, magnesium: 10, phosphorus: 29, potassium: 146, sodium: 4, zinc: 0.17
    },
    'èŒ„å­': {
        calories: 25, protein: 1.0, carbs: 5.9, fat: 0.2, fiber: 3.0, processing: 1,
        vitaminA: 1, vitaminC: 2.2, vitaminE: 0.3, vitaminB1: 0.04, vitaminB2: 0.02, vitaminB6: 0.08, folate: 22,
        calcium: 9, iron: 0.23, magnesium: 14, phosphorus: 24, potassium: 229, sodium: 2, zinc: 0.16
    },

    // === è±†ç±»/åšæœ ===
    'é»„è±†': {
        calories: 446, protein: 36.5, carbs: 30.2, fat: 19.9, fiber: 9.3, processing: 1,
        vitaminA: 1, vitaminC: 6, vitaminE: 0.85, vitaminB1: 0.87, vitaminB2: 0.87, vitaminB6: 0.38, folate: 375,
        calcium: 277, iron: 15.7, magnesium: 280, phosphorus: 704, potassium: 1797, sodium: 2, zinc: 4.9
    },
    'è±†è…': {
        calories: 76, protein: 8.1, carbs: 1.9, fat: 4.8, fiber: 0.3, processing: 2,
        vitaminA: 25, vitaminC: 0, vitaminE: 0.01, vitaminB1: 0.07, vitaminB2: 0.06, vitaminB6: 0.06, folate: 15,
        calcium: 350, iron: 5.4, magnesium: 30, phosphorus: 97, potassium: 121, sodium: 7, zinc: 0.8
    },
    'èŠ±ç”Ÿ': {
        calories: 567, protein: 25.8, carbs: 16.1, fat: 49.2, fiber: 8.5, processing: 1,
        vitaminA: 0, vitaminC: 0, vitaminE: 8.33, vitaminB1: 0.64, vitaminB2: 0.14, vitaminB6: 0.35, folate: 240,
        calcium: 92, iron: 4.58, magnesium: 168, phosphorus: 376, potassium: 705, sodium: 18, zinc: 3.27
    },
    'æ ¸æ¡ƒ': {
        calories: 654, protein: 15.2, carbs: 13.7, fat: 65.2, fiber: 6.7, processing: 1,
        vitaminA: 20, vitaminC: 1.3, vitaminE: 0.70, vitaminB1: 0.34, vitaminB2: 0.15, vitaminB6: 0.54, folate: 98,
        calcium: 98, iron: 2.91, magnesium: 158, phosphorus: 346, potassium: 441, sodium: 2, zinc: 3.09
    },

    // === è‚‰ç±»ã€è›‹å¥¶ç±» ===
    'é¸¡èƒ¸è‚‰': {
        calories: 165, protein: 31, carbs: 0, fat: 3.6, fiber: 0, processing: 1,
        vitaminA: 13, vitaminC: 0, vitaminE: 0.27, vitaminB1: 0.07, vitaminB2: 0.05, vitaminB6: 0.64, folate: 4,
        calcium: 15, iron: 0.7, magnesium: 29, phosphorus: 220, potassium: 256, sodium: 74, zinc: 1
    },
    'çŒªé‡Œè„Š': {
        calories: 143, protein: 21.5, carbs: 0, fat: 5.4, fiber: 0, processing: 1,
        vitaminA: 4, vitaminC: 0, vitaminE: 0.2, vitaminB1: 0.93, vitaminB2: 0.23, vitaminB6: 0.59, folate: 5,
        calcium: 7, iron: 0.8, magnesium: 22, phosphorus: 228, potassium: 362, sodium: 49, zinc: 1.8
    },
    'ç‰›è‚‰': {
        calories: 187, protein: 26.1, carbs: 0, fat: 9.8, fiber: 0, processing: 1,
        vitaminA: 0, vitaminC: 0, vitaminE: 0.13, vitaminB1: 0.05, vitaminB2: 0.17, vitaminB6: 0.32, folate: 8,
        calcium: 9, iron: 2.6, magnesium: 21, phosphorus: 174, potassium: 318, sodium: 56, zinc: 4.4
    },
    'é¸¡è›‹': {
        calories: 143, protein: 13, carbs: 1.1, fat: 9.5, fiber: 0, processing: 1,
        vitaminA: 160, vitaminC: 0, vitaminE: 1.05, vitaminB1: 0.07, vitaminB2: 0.44, vitaminB6: 0.17, folate: 47,
        calcium: 56, iron: 1.75, magnesium: 12, phosphorus: 198, potassium: 138, sodium: 142, zinc: 1.3
    },
    'ç‰›å¥¶': {
        calories: 54, protein: 3.3, carbs: 5, fat: 1.6, fiber: 0, processing: 2,
        vitaminA: 46, vitaminC: 1.3, vitaminE: 0.05, vitaminB1: 0.04, vitaminB2: 0.18, vitaminB6: 0.04, folate: 5,
        calcium: 119, iron: 0.05, magnesium: 11, phosphorus: 93, potassium: 143, sodium: 44, zinc: 0.5
    },
    'é…¸å¥¶': {
        calories: 61, protein: 3.5, carbs: 4.7, fat: 3.3, fiber: 0, processing: 3,
        vitaminA: 28, vitaminC: 0.8, vitaminE: 0.06, vitaminB1: 0.04, vitaminB2: 0.18, vitaminB6: 0.04, folate: 7,
        calcium: 121, iron: 0.05, magnesium: 12, phosphorus: 95, potassium: 155, sodium: 46, zinc: 0.6
    },

    // === é±¼è™¾/æ°´äº§ç±» ===
    'é²ˆé±¼': {
        calories: 97, protein: 18.4, carbs: 0, fat: 2.0, fiber: 0, processing: 1,
        vitaminA: 13, vitaminC: 1, vitaminE: 0.7, vitaminB1: 0.06, vitaminB2: 0.08, vitaminB6: 0.2, folate: 10,
        calcium: 16, iron: 0.6, magnesium: 27, phosphorus: 205, potassium: 284, sodium: 51, zinc: 0.8
    },
    'ä¸‰æ–‡é±¼': {
        calories: 206, protein: 22, carbs: 0, fat: 13, fiber: 0, processing: 1,
        vitaminA: 50, vitaminC: 0, vitaminE: 2.8, vitaminB1: 0.23, vitaminB2: 0.38, vitaminB6: 0.93, folate: 25,
        calcium: 9, iron: 0.8, magnesium: 29, phosphorus: 252, potassium: 363, sodium: 50, zinc: 0.6
    },
    'å¯¹è™¾': {
        calories: 99, protein: 18.3, carbs: 0.9, fat: 1.4, fiber: 0, processing: 1,
        vitaminA: 46, vitaminC: 0, vitaminE: 1.8, vitaminB1: 0.04, vitaminB2: 0.06, vitaminB6: 0.12, folate: 19,
        calcium: 70, iron: 1.2, magnesium: 34, phosphorus: 214, potassium: 259, sodium: 148, zinc: 1.3
    },

    // === åŠ å·¥é£Ÿå“ç¤ºä¾‹ ===
    'é¦™è‚ ': {
        calories: 301, protein: 12, carbs: 2.7, fat: 27, fiber: 0, processing: 5,
        vitaminA: 17, vitaminC: 0, vitaminE: 0.24, vitaminB1: 0.69, vitaminB2: 0.19, vitaminB6: 0.17, folate: 4,
        calcium: 21, iron: 1.7, magnesium: 17, phosphorus: 102, potassium: 278, sodium: 917, zinc: 1.7
    },
    'å’¸é¸­è›‹': {
        calories: 180, protein: 10.6, carbs: 1.1, fat: 14.2, fiber: 0, processing: 4,
        vitaminA: 260, vitaminC: 0, vitaminE: 0.87, vitaminB1: 0.03, vitaminB2: 0.36, vitaminB6: 0.17, folate: 54,
        calcium: 129, iron: 3.1, magnesium: 16, phosphorus: 183, potassium: 121, sodium: 790, zinc: 1.2
    },
// === æ–°å¢è”¬èœç±» ===
'é’æ¤’': {
    calories: 31, protein: 1.0, carbs: 6.0, fat: 0.3, fiber: 2.1, processing: 1,
    vitaminA: 18, vitaminC: 89.3, vitaminE: 0.37, vitaminB1: 0.05, vitaminB2: 0.03, vitaminB6: 0.29, folate: 13,
    calcium: 10, iron: 0.43, magnesium: 10, phosphorus: 20, potassium: 175, sodium: 2, zinc: 0.13
},
'çº¢æ¤’': {
    calories: 31, protein: 1.0, carbs: 6.3, fat: 0.3, fiber: 2.1, processing: 1,
    vitaminA: 534, vitaminC: 128, vitaminE: 1.58, vitaminB1: 0.05, vitaminB2: 0.08, vitaminB6: 0.29, folate: 18,
    calcium: 7, iron: 0.43, magnesium: 12, phosphorus: 26, potassium: 211, sodium: 2, zinc: 0.25
},
'èŒ¼è’¿': {
    calories: 22, protein: 2.1, carbs: 3.8, fat: 0.3, fiber: 1.9, processing: 1,
    vitaminA: 520, vitaminC: 35, vitaminE: 2.5, vitaminB1: 0.05, vitaminB2: 0.08, vitaminB6: 0.15, folate: 115,
    calcium: 77, iron: 1.42, magnesium: 25, phosphorus: 48, potassium: 387, sodium: 9, zinc: 0.24
},
'æ²¹éº¦èœ': {
    calories: 15, protein: 1.5, carbs: 2.8, fat: 0.2, fiber: 1.3, processing: 1,
    vitaminA: 375, vitaminC: 18, vitaminE: 0.8, vitaminB1: 0.06, vitaminB2: 0.08, vitaminB6: 0.09, folate: 73,
    calcium: 36, iron: 0.86, magnesium: 13, phosphorus: 28, potassium: 238, sodium: 5, zinc: 0.23
},
'éŸ­èœ': {
    calories: 27, protein: 1.9, carbs: 4.1, fat: 0.6, fiber: 2.4, processing: 1,
    vitaminA: 300, vitaminC: 12.8, vitaminE: 0.7, vitaminB1: 0.05, vitaminB2: 0.11, vitaminB6: 0.13, folate: 64,
    calcium: 54, iron: 1.6, magnesium: 20, phosphorus: 37, potassium: 260, sodium: 4, zinc: 0.39
},
'è´ç¬‹': {
    calories: 15, protein: 0.8, carbs: 3.3, fat: 0.1, fiber: 1.2, processing: 1,
    vitaminA: 38, vitaminC: 10.2, vitaminE: 0.22, vitaminB1: 0.03, vitaminB2: 0.03, vitaminB6: 0.05, folate: 46,
    calcium: 19, iron: 0.4, magnesium: 7, phosphorus: 26, potassium: 175, sodium: 8, zinc: 0.18
},
'èŠ¹èœ': {
    calories: 14, protein: 0.7, carbs: 3.0, fat: 0.2, fiber: 1.6, processing: 1,
    vitaminA: 22, vitaminC: 3.1, vitaminE: 0.27, vitaminB1: 0.02, vitaminB2: 0.06, vitaminB6: 0.08, folate: 36,
    calcium: 40, iron: 0.2, magnesium: 11, phosphorus: 24, potassium: 260, sodium: 80, zinc: 0.13
},
'å¤§ç™½èœ': {
    calories: 13, protein: 1.2, carbs: 2.2, fat: 0.2, fiber: 1.0, processing: 1,
    vitaminA: 9, vitaminC: 27, vitaminE: 0.1, vitaminB1: 0.04, vitaminB2: 0.05, vitaminB6: 0.17, folate: 66,
    calcium: 77, iron: 0.31, magnesium: 13, phosphorus: 29, potassium: 238, sodium: 9, zinc: 0.19
},
'å°ç™½èœ': {
    calories: 16, protein: 1.5, carbs: 2.8, fat: 0.2, fiber: 1.2, processing: 1,
    vitaminA: 399, vitaminC: 35, vitaminE: 0.8, vitaminB1: 0.06, vitaminB2: 0.07, vitaminB6: 0.16, folate: 69,
    calcium: 102, iron: 2.1, magnesium: 17, phosphorus: 37, potassium: 282, sodium: 7, zinc: 0.25
},
'ç”Ÿèœ': {
    calories: 15, protein: 1.4, carbs: 2.9, fat: 0.2, fiber: 1.3, processing: 1,
    vitaminA: 166, vitaminC: 9.2, vitaminE: 0.18, vitaminB1: 0.07, vitaminB2: 0.08, vitaminB6: 0.09, folate: 73,
    calcium: 36, iron: 0.86, magnesium: 13, phosphorus: 29, potassium: 238, sodium: 5, zinc: 0.18
},

// === æ–°å¢è‚‰ç±» ===
'çŒªè‚‰(ç˜¦)': {
    calories: 143, protein: 21.2, carbs: 0, fat: 5.9, fiber: 0, processing: 1,
    vitaminA: 1, vitaminC: 0.7, vitaminE: 0.2, vitaminB1: 0.57, vitaminB2: 0.25, vitaminB6: 0.42, folate: 7,
    calcium: 8, iron: 1.1, magnesium: 22, phosphorus: 211, potassium: 340, sodium: 54, zinc: 2.4
},
'çŒªè‚‰(è‚¥ç˜¦)': {
    calories: 225, protein: 16.9, carbs: 0, fat: 17.2, fiber: 0, processing: 1,
    vitaminA: 1, vitaminC: 0.6, vitaminE: 0.32, vitaminB1: 0.42, vitaminB2: 0.18, vitaminB6: 0.32, folate: 5,
    calcium: 6, iron: 0.8, magnesium: 18, phosphorus: 159, potassium: 270, sodium: 62, zinc: 1.8
},
'ç‰›æ’': {
    calories: 252, protein: 25.9, carbs: 0, fat: 16.2, fiber: 0, processing: 1,
    vitaminA: 0, vitaminC: 0, vitaminE: 0.43, vitaminB1: 0.08, vitaminB2: 0.2, vitaminB6: 0.36, folate: 9,
    calcium: 8, iron: 2.6, magnesium: 23, phosphorus: 195, potassium: 330, sodium: 59, zinc: 5.5
},
'ç‰›è‚‰(ç˜¦)': {
    calories: 177, protein: 26.1, carbs: 0, fat: 7.9, fiber: 0, processing: 1,
    vitaminA: 0, vitaminC: 0, vitaminE: 0.36, vitaminB1: 0.06, vitaminB2: 0.21, vitaminB6: 0.34, folate: 9,
    calcium: 8, iron: 2.5, magnesium: 22, phosphorus: 178, potassium: 320, sodium: 56, zinc: 5.1
},
'ç¾Šè‚‰': {
    calories: 276, protein: 25.5, carbs: 0, fat: 19.2, fiber: 0, processing: 1,
    vitaminA: 0, vitaminC: 0, vitaminE: 0.2, vitaminB1: 0.12, vitaminB2: 0.25, vitaminB6: 0.14, folate: 20,
    calcium: 16, iron: 1.9, magnesium: 25, phosphorus: 175, potassium: 350, sodium: 70, zinc: 3.9
},
'é¸¡è…¿è‚‰': {
    calories: 177, protein: 24.3, carbs: 0, fat: 9.3, fiber: 0, processing: 1,
    vitaminA: 21, vitaminC: 0, vitaminE: 0.27, vitaminB1: 0.08, vitaminB2: 0.2, vitaminB6: 0.35, folate: 10,
    calcium: 13, iron: 1.0, magnesium: 26, phosphorus: 195, potassium: 270, sodium: 85, zinc: 1.9
},
'é¸­è‚‰': {
    calories: 195, protein: 18.6, carbs: 0, fat: 13.2, fiber: 0, processing: 1,
    vitaminA: 32, vitaminC: 0, vitaminE: 0.7, vitaminB1: 0.27, vitaminB2: 0.21, vitaminB6: 0.2, folate: 20,
    calcium: 11, iron: 2.1, magnesium: 17, phosphorus: 203, potassium: 271, sodium: 65, zinc: 1.8
},
'é¹…è‚‰': {
    calories: 161, protein: 22.8, carbs: 0, fat: 7.1, fiber: 0, processing: 1,
    vitaminA: 16, vitaminC: 0, vitaminE: 0.4, vitaminB1: 0.1, vitaminB2: 0.38, vitaminB6: 0.46, folate: 9,
    calcium: 12, iron: 2.8, magnesium: 29, phosphorus: 302, potassium: 420, sodium: 78, zinc: 2.5
},
'å…”è‚‰': {
    calories: 136, protein: 20.1, carbs: 0, fat: 5.6, fiber: 0, processing: 1,
    vitaminA: 0, vitaminC: 0, vitaminE: 0.41, vitaminB1: 0.08, vitaminB2: 0.12, vitaminB6: 0.3, folate: 10,
    calcium: 13, iron: 1.6, magnesium: 21, phosphorus: 213, potassium: 330, sodium: 41, zinc: 1.4
},
'çŒªè‚': {
    calories: 134, protein: 21.4, carbs: 3.8, fat: 3.7, fiber: 0, processing: 1,
    vitaminA: 6500, vitaminC: 25.3, vitaminE: 0.6, vitaminB1: 0.26, vitaminB2: 2.8, vitaminB6: 0.76, folate: 290,
    calcium: 10, iron: 23.3, magnesium: 18, phosphorus: 288, potassium: 273, sodium: 87, zinc: 6.5
},

// === æ–°å¢æ°´äº§å“ ===
'å¸¦é±¼': {
    calories: 108, protein: 19.4, carbs: 0, fat: 3.2, fiber: 0, processing: 1,
    vitaminA: 40, vitaminC: 0, vitaminE: 0.5, vitaminB1: 0.09, vitaminB2: 0.1, vitaminB6: 0.4, folate: 5,
    calcium: 20, iron: 0.3, magnesium: 27, phosphorus: 230, potassium: 330, sodium: 90, zinc: 0.7
},
'é»„é±¼': {
    calories: 110, protein: 19.8, carbs: 0, fat: 3.0, fiber: 0, processing: 1,
    vitaminA: 32, vitaminC: 0, vitaminE: 0.6, vitaminB1: 0.11, vitaminB2: 0.07, vitaminB6: 0.37, folate: 8,
    calcium: 19, iron: 0.4, magnesium: 25, phosphorus: 218, potassium: 310, sodium: 78, zinc: 0.5
},
'è‰é±¼': {
    calories: 90, protein: 17.5, carbs: 0, fat: 1.8, fiber: 0, processing: 1,
    vitaminA: 15, vitaminC: 1.0, vitaminE: 0.4, vitaminB1: 0.09, vitaminB2: 0.06, vitaminB6: 0.13, folate: 14,
    calcium: 30, iron: 1.1, magnesium: 25, phosphorus: 244, potassium: 302, sodium: 48, zinc: 0.9
},
'é²¤é±¼': {
    calories: 127, protein: 17.5, carbs: 0, fat: 5.6, fiber: 0, processing: 1,
    vitaminA: 22, vitaminC: 1.6, vitaminE: 1.0, vitaminB1: 0.14, vitaminB2: 0.05, vitaminB6: 0.19, folate: 9,
    calcium: 52, iron: 1.2, magnesium: 30, phosphorus: 260, potassium: 314, sodium: 45, zinc: 1.5
},
'é²«é±¼': {
    calories: 108, protein: 18.8, carbs: 0, fat: 3.1, fiber: 0, processing: 1,
    vitaminA: 12, vitaminC: 1.4, vitaminE: 0.8, vitaminB1: 0.1, vitaminB2: 0.11, vitaminB6: 0.16, folate: 15,
    calcium: 90, iron: 1.0, magnesium: 28, phosphorus: 234, potassium: 278, sodium: 59, zinc: 1.1
},
'é¾™è™¾': {
    calories: 89, protein: 18.8, carbs: 0.5, fat: 0.9, fiber: 0, processing: 1,
    vitaminA: 8, vitaminC: 0, vitaminE: 1.9, vitaminB1: 0.05, vitaminB2: 0.07, vitaminB6: 0.09, folate: 12,
    calcium: 52, iron: 0.5, magnesium: 32, phosphorus: 185, potassium: 252, sodium: 253, zinc: 2.6
},
'èŸ¹è‚‰': {
    calories: 83, protein: 17.2, carbs: 0, fat: 1.5, fiber: 0, processing: 1,
    vitaminA: 8, vitaminC: 7.6, vitaminE: 1.5, vitaminB1: 0.05, vitaminB2: 0.08, vitaminB6: 0.15, folate: 50,
    calcium: 50, iron: 0.7, magnesium: 28, phosphorus: 187, potassium: 262, sodium: 311, zinc: 3.5
},
'æ‰‡è´': {
    calories: 88, protein: 16.8, carbs: 3.2, fat: 0.8, fiber: 0, processing: 1,
    vitaminA: 10, vitaminC: 0, vitaminE: 0.9, vitaminB1: 0.02, vitaminB2: 0.2, vitaminB6: 0.1, folate: 12,
    calcium: 9, iron: 0.6, magnesium: 40, phosphorus: 236, potassium: 268, sodium: 217, zinc: 1.4
},
'ç« é±¼': {
    calories: 82, protein: 14.9, carbs: 2.2, fat: 1.2, fiber: 0, processing: 1,
    vitaminA: 5, vitaminC: 5.3, vitaminE: 0.7, vitaminB1: 0.03, vitaminB2: 0.04, vitaminB6: 0.36, folate: 16,
    calcium: 53, iron: 5.3, magnesium: 30, phosphorus: 186, potassium: 350, sodium: 230, zinc: 1.7
},
'é±¿é±¼': {
    calories: 92, protein: 15.6, carbs: 3.1, fat: 1.4, fiber: 0, processing: 1,
    vitaminA: 9, vitaminC: 3.9, vitaminE: 0.6, vitaminB1: 0.03, vitaminB2: 0.27, vitaminB6: 0.06, folate: 5,
    calcium: 32, iron: 0.7, magnesium: 33, phosphorus: 221, potassium: 246, sodium: 239, zinc: 1.5
},

// === æ–°å¢è±†åˆ¶å“ ===
'è±†è…å¹²': {
    calories: 143, protein: 17.5, carbs: 8.1, fat: 5.0, fiber: 1.2, processing: 3,
    vitaminA: 32, vitaminC: 0, vitaminE: 0.02, vitaminB1: 0.08, vitaminB2: 0.12, vitaminB6: 0.11, folate: 19,
    calcium: 680, iron: 6.5, magnesium: 60, phosphorus: 102, potassium: 140, sodium: 11, zinc: 0.9
},
'è±†è…çš®': {
    calories: 376, protein: 48.7, carbs: 12.8, fat: 14.5, fiber: 3.5, processing: 3,
    vitaminA: 0, vitaminC: 0, vitaminE: 0.05, vitaminB1: 0.19, vitaminB2: 0.6, vitaminB6: 0.2, folate: 93,
    calcium: 510, iron: 9.9, magnesium: 43, phosphorus: 214, potassium: 148, sodium: 15, zinc: 2.1
},
'è±†æµ†': {
    calories: 33, protein: 3.0, carbs: 2.5, fat: 1.5, fiber: 0.3, processing: 2,
    vitaminA: 1, vitaminC: 0, vitaminE: 0.35, vitaminB1: 0.16, vitaminB2: 0.07, vitaminB6: 0.07, folate: 43,
    calcium: 25, iron: 0.9, magnesium: 19, phosphorus: 52, potassium: 141, sodium: 12, zinc: 0.3
},
'è±†è±‰': {
    calories: 201, protein: 18.3, carbs: 10.2, fat: 9.8, fiber: 2.5, processing: 4,
    vitaminA: 0, vitaminC: 0, vitaminE: 0.4, vitaminB1: 0.24, vitaminB2: 0.53, vitaminB6: 0.19, folate: 172,
    calcium: 55, iron: 5.8, magnesium: 75, phosphorus: 100, potassium: 412, sodium: 1200, zinc: 1.2
},
'ç»¿è±†': {
    calories: 347, protein: 23.9, carbs: 62.6, fat: 1.2, fiber: 16.3, processing: 1,
    vitaminA: 2, vitaminC: 1.0, vitaminE: 0.5, vitaminB1: 0.62, vitaminB2: 0.23, vitaminB6: 0.38, folate: 625,
    calcium: 84, iron: 6.7, magnesium: 189, phosphorus: 367, potassium: 1246, sodium: 15, zinc: 2.7
},
'çº¢è±†': {
    calories: 337, protein: 22.5, carbs: 61.3, fat: 0.8, fiber: 15.2, processing: 1,
    vitaminA: 0, vitaminC: 4.5, vitaminE: 0.21, vitaminB1: 0.61, vitaminB2: 0.22, vitaminB6: 0.4, folate: 394,
    calcium: 83, iron: 7.0, magnesium: 138, phosphorus: 406, potassium: 1254, sodium: 12, zinc: 2.8
},
'è±Œè±†': {
    calories: 81, protein: 5.4, carbs: 14.5, fat: 0.4, fiber: 5.1, processing: 1,
    vitaminA: 38, vitaminC: 40, vitaminE: 0.13, vitaminB1: 0.27, vitaminB2: 0.13, vitaminB6: 0.17, folate: 65,
    calcium: 25, iron: 1.5, magnesium: 33, phosphorus: 108, potassium: 244, sodium: 5, zinc: 1.2
},
'èš•è±†': {
    calories: 110, protein: 7.6, carbs: 19.7, fat: 0.4, fiber: 5.4, processing: 1,
    vitaminA: 3, vitaminC: 1.4, vitaminE: 0.05, vitaminB1: 0.14, vitaminB2: 0.09, vitaminB6: 0.14, folate: 104,
    calcium: 36, iron: 1.7, magnesium: 43, phosphorus: 125, potassium: 332, sodium: 13, zinc: 1.0
},
'è…ç«¹': {
    calories: 446, protein: 52.6, carbs: 23.8, fat: 15.5, fiber: 2.6, processing: 3,
    vitaminA: 0, vitaminC: 0, vitaminE: 0.11, vitaminB1: 0.35, vitaminB2: 0.9, vitaminB6: 0.3, folate: 173,
    calcium: 460, iron: 9.2, magnesium: 67, phosphorus: 286, potassium: 213, sodium: 13, zinc: 3.4
},
'é¦™å¹²': {
    calories: 199, protein: 20.2, carbs: 10.2, fat: 9.9, fiber: 1.5, processing: 3,
    vitaminA: 0, vitaminC: 0, vitaminE: 0.02, vitaminB1: 0.16, vitaminB2: 0.24, vitaminB6: 0.08, folate: 15,
    calcium: 350, iron: 4.7, magnesium: 48, phosphorus: 99, potassium: 130, sodium: 312, zinc: 1.1
},

// === æ–°å¢è°·ç‰©/ä¸»é£Ÿç±» ===
'ç³™ç±³': {
    calories: 362, protein: 7.5, carbs: 76.2, fat: 2.7, fiber: 3.5, processing: 1,
    vitaminA: 0, vitaminC: 0, vitaminE: 1.2, vitaminB1: 0.4, vitaminB2: 0.08, vitaminB6: 0.6, folate: 20,
    calcium: 33, iron: 1.8, magnesium: 143, phosphorus: 333, potassium: 268, sodium: 8, zinc: 2.0
},
'é»‘ç±³': {
    calories: 356, protein: 8.5, carbs: 75.2, fat: 3.3, fiber: 4.7, processing: 1,
    vitaminA: 0, vitaminC: 0, vitaminE: 1.0, vitaminB1: 0.45, vitaminB2: 0.28, vitaminB6: 0.5, folate: 18,
    calcium: 41, iron: 3.9, magnesium: 138, phosphorus: 298, potassium: 288, sodium: 10, zinc: 5.5
},
'ç´«ç±³': {
    calories: 349, protein: 7.9, carbs: 76.1, fat: 2.2, fiber: 4.0, processing: 1,
    vitaminA: 0, vitaminC: 0, vitaminE: 0.8, vitaminB1: 0.39, vitaminB2: 0.21, vitaminB6: 0.54, folate: 16,
    calcium: 33, iron: 2.2, magnesium: 95, phosphorus: 284, potassium: 282, sodium: 5, zinc: 2.2
},
'å¤§ç±³': {
    calories: 358, protein: 6.8, carbs: 79, fat: 0.6, fiber: 1.3, processing: 2,
    vitaminA: 0, vitaminC: 0, vitaminE: 0.11, vitaminB1: 0.07, vitaminB2: 0.05, vitaminB6: 0.15, folate: 12,
    calcium: 28, iron: 0.8, magnesium: 25, phosphorus: 115, potassium: 115, sodium: 5, zinc: 1.2
},
'å°éº¦ç²‰': {
    calories: 340, protein: 10.3, carbs: 73.6, fat: 1.1, fiber: 3.1, processing: 2,
    vitaminA: 0, vitaminC: 0, vitaminE: 1.0, vitaminB1: 0.45, vitaminB2: 0.22, vitaminB6: 0.2, folate: 44,
    calcium: 34, iron: 3.9, magnesium: 120, phosphorus: 346, potassium: 405, sodium: 2, zinc: 2.6
},
'èéº¦': {
    calories: 343, protein: 13.3, carbs: 71.5, fat: 3.4, fiber: 10.0, processing: 1,
    vitaminA: 0, vitaminC: 0, vitaminE: 0.8, vitaminB1: 0.4, vitaminB2: 0.43, vitaminB6: 0.35, folate: 54,
    calcium: 41, iron: 4.1, magnesium: 231, phosphorus: 337, potassium: 577, sodium: 1, zinc: 2.4
},
'ç‡•éº¦ç²¥': {
    calories: 68, protein: 2.4, carbs: 12.0, fat: 1.4, fiber: 1.7, processing: 2,
    vitaminA: 0, vitaminC: 0, vitaminE: 0.13, vitaminB1: 0.15, vitaminB2: 0.04, vitaminB6: 0.03, folate: 8,
    calcium: 18, iron: 0.7, magnesium: 32, phosphorus: 82, potassium: 80, sodium: 2, zinc: 0.7
},
'æ„å¤§åˆ©é¢': {
    calories: 158, protein: 5.8, carbs: 31.0, fat: 0.9, fiber: 1.8, processing: 3,
    vitaminA: 0, vitaminC: 0, vitaminE: 0.1, vitaminB1: 0.2, vitaminB2: 0.13, vitaminB6: 0.05, folate: 14,
    calcium: 21, iron: 1.3, magnesium: 22, phosphorus: 63, potassium: 58, sodium: 6, zinc: 0.8
},
'è‹æ‰“é¥¼å¹²': {
    calories: 421, protein: 9.1, carbs: 73.0, fat: 9.9, fiber: 2.8, processing: 4,
    vitaminA: 0, vitaminC: 0, vitaminE: 0.3, vitaminB1: 0.28, vitaminB2: 0.1, vitaminB6: 0.03, folate: 28,
    calcium: 104, iron: 2.8, magnesium: 31, phosphorus: 115, potassium: 131, sodium: 635, zinc: 0.9
},
'å¥¶æ²¹è›‹ç³•': {
    calories: 321, protein: 5.0, carbs: 36.3, fat: 17.8, fiber: 0.5, processing: 5,
    vitaminA: 160, vitaminC: 0.1, vitaminE: 1.0, vitaminB1: 0.2, vitaminB2: 0.32, vitaminB6: 0.05, folate: 41,
    calcium: 83, iron: 1.6, magnesium: 15, phosphorus: 166, potassium: 98, sodium: 360, zinc: 0.5
},

// === æ–°å¢æ°´æœç±» ===
'èŠ’æœ': {
    calories: 60, protein: 0.8, carbs: 15, fat: 0.4, fiber: 1.6, processing: 1,
    vitaminA: 54, vitaminC: 36.4, vitaminE: 0.9, vitaminB1: 0.03, vitaminB2: 0.04, vitaminB6: 0.12, folate: 14,
    calcium: 11, iron: 0.16, magnesium: 10, phosphorus: 14, potassium: 168, sodium: 1, zinc: 0.09
},
'çŸ³æ¦´': {
    calories: 83, protein: 1.7, carbs: 18.7, fat: 1.2, fiber: 4, processing: 1,
    vitaminA: 0, vitaminC: 10.2, vitaminE: 0.6, vitaminB1: 0.07, vitaminB2: 0.05, vitaminB6: 0.08, folate: 38,
    calcium: 10, iron: 0.3, magnesium: 12, phosphorus: 36, potassium: 236, sodium: 3, zinc: 0.35
},
'è”æ': {
    calories: 66, protein: 0.8, carbs: 16.5, fat: 0.4, fiber: 1.3, processing: 1,
    vitaminA: 0, vitaminC: 71.5, vitaminE: 0.07, vitaminB1: 0.01, vitaminB2: 0.07, vitaminB6: 0.1, folate: 14,
    calcium: 5, iron: 0.31, magnesium: 10, phosphorus: 31, potassium: 171, sodium: 1, zinc: 0.07
},
'é¾™çœ¼': {
    calories: 60, protein: 1.3, carbs: 15.1, fat: 0.1, fiber: 1.1, processing: 1,
    vitaminA: 0, vitaminC: 84, vitaminE: 0.02, vitaminB1: 0.03, vitaminB2: 0.14, vitaminB6: 0.18, folate: 14,
    calcium: 1, iron: 0.13, magnesium: 10, phosphorus: 21, potassium: 266, sodium: 3, zinc: 0.05
},
'æ¨æ¢…': {
    calories: 43, protein: 0.8, carbs: 10.6, fat: 0.2, fiber: 1.7, processing: 1,
    vitaminA: 6, vitaminC: 28, vitaminE: 0.35, vitaminB1: 0.02, vitaminB2: 0.03, vitaminB6: 0.05, folate: 6,
    calcium: 23, iron: 0.27, magnesium: 10, phosphorus: 12, potassium: 119, sodium: 1, zinc: 0.14
},
'æ¨±æ¡ƒ': {
    calories: 50, protein: 1, carbs: 12.2, fat: 0.3, fiber: 1.6, processing: 1,
    vitaminA: 64, vitaminC: 7, vitaminE: 0.07, vitaminB1: 0.03, vitaminB2: 0.03, vitaminB6: 0.05, folate: 4,
    calcium: 13, iron: 0.36, magnesium: 11, phosphorus: 21, potassium: 222, sodium: 0, zinc: 0.07
},
'æ': {
    calories: 48, protein: 1.4, carbs: 11.1, fat: 0.4, fiber: 2, processing: 1,
    vitaminA: 96, vitaminC: 10, vitaminE: 0.89, vitaminB1: 0.03, vitaminB2: 0.04, vitaminB6: 0.05, folate: 9,
    calcium: 14, iron: 0.4, magnesium: 10, phosphorus: 23, potassium: 259, sodium: 1, zinc: 0.2
},
'æå­': {
    calories: 46, protein: 0.7, carbs: 11.4, fat: 0.3, fiber: 1.4, processing: 1,
    vitaminA: 17, vitaminC: 9.5, vitaminE: 0.26, vitaminB1: 0.03, vitaminB2: 0.03, vitaminB6: 0.03, folate: 5,
    calcium: 6, iron: 0.17, magnesium: 7, phosphorus: 16, potassium: 157, sodium: 0, zinc: 0.1
},
'è‘¡è„æŸš': {
    calories: 42, protein: 0.8, carbs: 10.7, fat: 0.1, fiber: 1.6, processing: 1,
    vitaminA: 58, vitaminC: 31.2, vitaminE: 0.13, vitaminB1: 0.04, vitaminB2: 0.02, vitaminB6: 0.04, folate: 13,
    calcium: 22, iron: 0.09, magnesium: 9, phosphorus: 18, potassium: 135, sodium: 0, zinc: 0.07
},
'ç«é¾™æœ': {
    calories: 60, protein: 1.2, carbs: 12.9, fat: 0.4, fiber: 2.5, processing: 1,
    vitaminA: 0, vitaminC: 8, vitaminE: 0.4, vitaminB1: 0.04, vitaminB2: 0.05, vitaminB6: 0.16, folate: 3,
    calcium: 8, iron: 0.55, magnesium: 40, phosphorus: 22, potassium: 272, sodium: 0, zinc: 0.12
},

// === æ–°å¢åšæœç±» ===
'æä»': {
    calories: 579, protein: 21.2, carbs: 21.7, fat: 49.9, fiber: 12.5, processing: 1,
    vitaminA: 0, vitaminC: 0, vitaminE: 25.6, vitaminB1: 0.2, vitaminB2: 1.14, vitaminB6: 0.14, folate: 44,
    calcium: 269, iron: 3.7, magnesium: 270, phosphorus: 481, potassium: 733, sodium: 1, zinc: 3.1
},
'æ¦›å­': {
    calories: 628, protein: 15, carbs: 17, fat: 60.8, fiber: 9.7, processing: 1,
    vitaminA: 1, vitaminC: 6.3, vitaminE: 15, vitaminB1: 0.64, vitaminB2: 0.11, vitaminB6: 0.56, folate: 113,
    calcium: 114, iron: 4.7, magnesium: 163, phosphorus: 290, potassium: 680, sodium: 0, zinc: 2.5
},
'æ —å­': {
    calories: 213, protein: 4.3, carbs: 45.5, fat: 2.2, fiber: 8.1, processing: 1,
    vitaminA: 1, vitaminC: 40.2, vitaminE: 0.5, vitaminB1: 0.24, vitaminB2: 0.16, vitaminB6: 0.35, folate: 68,
    calcium: 27, iron: 0.9, magnesium: 30, phosphorus: 96, potassium: 715, sodium: 3, zinc: 0.5
},
'æ¾å­': {
    calories: 673, protein: 13.7, carbs: 13.1, fat: 68.4, fiber: 3.7, processing: 1,
    vitaminA: 1, vitaminC: 0.8, vitaminE: 9.3, vitaminB1: 0.36, vitaminB2: 0.22, vitaminB6: 0.09, folate: 34,
    calcium: 16, iron: 5.5, magnesium: 251, phosphorus: 575, potassium: 597, sodium: 2, zinc: 6.5
},
'è‘µèŠ±ç±½': {
    calories: 584, protein: 20.8, carbs: 20, fat: 51.5, fiber: 8.6, processing: 1,
    vitaminA: 3, vitaminC: 1.4, vitaminE: 35.2, vitaminB1: 1.48, vitaminB2: 0.36, vitaminB6: 1.35, folate: 227,
    calcium: 78, iron: 5.3, magnesium: 325, phosphorus: 660, potassium: 645, sodium: 9, zinc: 5
},
'å—ç“œå­': {
    calories: 559, protein: 30.2, carbs: 10.7, fat: 49.1, fiber: 6, processing: 1,
    vitaminA: 16, vitaminC: 1.9, vitaminE: 2.2, vitaminB1: 0.27, vitaminB2: 0.15, vitaminB6: 0.14, folate: 58,
    calcium: 46, iron: 8.8, magnesium: 550, phosphorus: 1230, potassium: 809, sodium: 7, zinc: 7.8
},
'å¼€å¿ƒæœ': {
    calories: 560, protein: 20.2, carbs: 27.5, fat: 45.4, fiber: 10.6, processing: 1,
    vitaminA: 26, vitaminC: 5.6, vitaminE: 2.3, vitaminB1: 0.87, vitaminB2: 0.16, vitaminB6: 1.7, folate: 51,
    calcium: 105, iron: 3.9, magnesium: 121, phosphorus: 490, potassium: 1025, sodium: 1, zinc: 2.2
},
'è…°æœ': {
    calories: 553, protein: 18.2, carbs: 30.2, fat: 43.9, fiber: 3.3, processing: 1,
    vitaminA: 0, vitaminC: 0.5, vitaminE: 0.9, vitaminB1: 0.42, vitaminB2: 0.06, vitaminB6: 0.42, folate: 25,
    calcium: 37, iron: 6.7, magnesium: 292, phosphorus: 593, potassium: 660, sodium: 12, zinc: 5.8
},
'å¤å¨å¤·æœ': {
    calories: 718, protein: 7.9, carbs: 13.8, fat: 75.8, fiber: 8.6, processing: 1,
    vitaminA: 0, vitaminC: 1.1, vitaminE: 0.6, vitaminB1: 0.34, vitaminB2: 0.12, vitaminB6: 0.28, folate: 22,
    calcium: 40, iron: 2.7, magnesium: 130, phosphorus: 188, potassium: 368, sodium: 5, zinc: 1.3
},
'ç“œå­': {
    calories: 562, protein: 19.4, carbs: 19.8, fat: 49.8, fiber: 8.1, processing: 1,
    vitaminA: 2, vitaminC: 1.3, vitaminE: 33.8, vitaminB1: 1.44, vitaminB2: 0.35, vitaminB6: 1.24, folate: 218,
    calcium: 75, iron: 5.1, magnesium: 314, phosphorus: 645, potassium: 632, sodium: 9, zinc: 4.8
},

// === æ–°å¢å¥¶åˆ¶å“ç±» ===
'é…¸å¥¶(ä½è„‚)': {
    calories: 56, protein: 5.7, carbs: 7.8, fat: 0.4, fiber: 0, processing: 3,
    vitaminA: 20, vitaminC: 1.2, vitaminE: 0.03, vitaminB1: 0.08, vitaminB2: 0.24, vitaminB6: 0.08, folate: 18,
    calcium: 183, iron: 0.11, magnesium: 17, phosphorus: 144, potassium: 234, sodium: 73, zinc: 0.9
},
'å¥¶é…ª': {
    calories: 402, protein: 25, carbs: 1.3, fat: 33, fiber: 0, processing: 3,
    vitaminA: 280, vitaminC: 0, vitaminE: 0.31, vitaminB1: 0.03, vitaminB2: 0.43, vitaminB6: 0.08, folate: 27,
    calcium: 721, iron: 0.68, magnesium: 28, phosphorus: 512, potassium: 98, sodium: 621, zinc: 3.1
},
'å¥¶æ²¹': {
    calories: 340, protein: 2.1, carbs: 2.8, fat: 36.2, fiber: 0, processing: 3,
    vitaminA: 428, vitaminC: 0.5, vitaminE: 0.86, vitaminB1: 0.03, vitaminB2: 0.14, vitaminB6: 0.04, folate: 6,
    calcium: 73, iron: 0.1, magnesium: 7, phosphorus: 68, potassium: 104, sodium: 98, zinc: 0.3
},
'é»„æ²¹': {
    calories: 717, protein: 0.9, carbs: 0.1, fat: 81.1, fiber: 0, processing: 3,
    vitaminA: 684, vitaminC: 0, vitaminE: 2.32, vitaminB1: 0.01, vitaminB2: 0.03, vitaminB6: 0.01, folate: 3,
    calcium: 24, iron: 0.02, magnesium: 2, phosphorus: 24, potassium: 24, sodium: 714, zinc: 0.1
},
'ç‰›å¥¶(å…¨è„‚)': {
    calories: 61, protein: 3.2, carbs: 4.8, fat: 3.3, fiber: 0, processing: 2,
    vitaminA: 46, vitaminC: 0, vitaminE: 0.06, vitaminB1: 0.05, vitaminB2: 0.18, vitaminB6: 0.04, folate: 5,
    calcium: 113, iron: 0.03, magnesium: 10, phosphorus: 91, potassium: 143, sodium: 43, zinc: 0.4
},
'ç‰›å¥¶(è„±è„‚)': {
    calories: 34, protein: 3.4, carbs: 4.8, fat: 0.1, fiber: 0, processing: 2,
    vitaminA: 10, vitaminC: 0, vitaminE: 0.01, vitaminB1: 0.04, vitaminB2: 0.18, vitaminB6: 0.04, folate: 5,
    calcium: 122, iron: 0.03, magnesium: 11, phosphorus: 95, potassium: 156, sodium: 44, zinc: 0.4
},
'å†°æ·‡æ·‹': {
    calories: 207, protein: 3.5, carbs: 24, fat: 11, fiber: 0.5, processing: 4,
    vitaminA: 107, vitaminC: 0.6, vitaminE: 0.44, vitaminB1: 0.04, vitaminB2: 0.19, vitaminB6: 0.07, folate: 6,
    calcium: 128, iron: 0.7, magnesium: 14, phosphorus: 105, potassium: 199, sodium: 80, zinc: 0.7
},
'ç‚¼ä¹³': {
    calories: 321, protein: 7.9, carbs: 54.4, fat: 8, fiber: 0, processing: 4,
    vitaminA: 85, vitaminC: 1.9, vitaminE: 0.16, vitaminB1: 0.11, vitaminB2: 0.42, vitaminB6: 0.08, folate: 9,
    calcium: 284, iron: 0.2, magnesium: 26, phosphorus: 230, potassium: 370, sodium: 127, zinc: 1
},

// === æ–°å¢è°ƒå‘³å“ç±» ===
'é…±æ²¹': {
    calories: 53, protein: 5.2, carbs: 5.6, fat: 0.1, fiber: 0.8, processing: 4,
    vitaminA: 0, vitaminC: 0, vitaminE: 0, vitaminB1: 0.02, vitaminB2: 0.18, vitaminB6: 0.07, folate: 15,
    calcium: 20, iron: 2.4, magnesium: 40, phosphorus: 86, potassium: 235, sodium: 5576, zinc: 0.4
},
'é†‹': {
    calories: 18, protein: 0, carbs: 0.9, fat: 0, fiber: 0, processing: 3,
    vitaminA: 0, vitaminC: 0, vitaminE: 0, vitaminB1: 0, vitaminB2: 0, vitaminB6: 0, folate: 0,
    calcium: 8, iron: 0.2, magnesium: 5, phosphorus: 8, potassium: 73, sodium: 5, zinc: 0.04
},
'ç•ªèŒ„é…±': {
    calories: 82, protein: 1.7, carbs: 20.1, fat: 0.5, fiber: 1.1, processing: 4,
    vitaminA: 171, vitaminC: 15.1, vitaminE: 1.07, vitaminB1: 0.06, vitaminB2: 0.11, vitaminB6: 0.09, folate: 10,
    calcium: 27, iron: 0.9, magnesium: 14, phosphorus: 33, potassium: 362, sodium: 883, zinc: 0.2
},
'èœ‚èœœ': {
    calories: 304, protein: 0.3, carbs: 82.4, fat: 0, fiber: 0.2, processing: 1,
    vitaminA: 0, vitaminC: 0.5, vitaminE: 0, vitaminB1: 0, vitaminB2: 0.04, vitaminB6: 0.02, folate: 2,
    calcium: 6, iron: 0.42, magnesium: 2, phosphorus: 4, potassium: 52, sodium: 4, zinc: 0.22
},
'è¾£æ¤’é…±': {
    calories: 40, protein: 1.3, carbs: 8.7, fat: 0.2, fiber: 1.5, processing: 4,
    vitaminA: 96, vitaminC: 12, vitaminE: 1.03, vitaminB1: 0.04, vitaminB2: 0.08, vitaminB6: 0.17, folate: 9,
    calcium: 14, iron: 0.64, magnesium: 13, phosphorus: 24, potassium: 153, sodium: 1078, zinc: 0.2
},
'èŠ¥æœ«': {
    calories: 67, protein: 4.3, carbs: 5.4, fat: 4.2, fiber: 1.5, processing: 3,
    vitaminA: 7, vitaminC: 21, vitaminE: 2.01, vitaminB1: 0.08, vitaminB2: 0.12, vitaminB6: 0.15, folate: 76,
    calcium: 172, iron: 1.46, magnesium: 27, phosphorus: 65, potassium: 152, sodium: 1176, zinc: 0.2
},
'èŠ±ç”Ÿé…±': {
    calories: 588, protein: 25, carbs: 20, fat: 50, fiber: 6, processing: 4,
    vitaminA: 0, vitaminC: 0, vitaminE: 8.9, vitaminB1: 0.15, vitaminB2: 0.13, vitaminB6: 0.44, folate: 87,
    calcium: 49, iron: 1.9, magnesium: 168, phosphorus: 335, potassium: 649, sodium: 426, zinc: 2.9
},
'æ²™æ‹‰é…±': {
    calories: 430, protein: 1.1, carbs: 7.8, fat: 45, fiber: 0, processing: 5,
    vitaminA: 46, vitaminC: 0, vitaminE: 10.5, vitaminB1: 0.02, vitaminB2: 0.04, vitaminB6: 0.03, folate: 12,
    calcium: 22, iron: 0.4, magnesium: 5, phosphorus: 19, potassium: 19, sodium: 690, zinc: 0.1
},
'è…ä¹³': {
    calories: 198, protein: 12.4, carbs: 3.2, fat: 15.2, fiber: 0.5, processing: 4,
    vitaminA: 18, vitaminC: 0, vitaminE: 0.01, vitaminB1: 0.04, vitaminB2: 0.42, vitaminB6: 0.07, folate: 8,
    calcium: 312, iron: 4.1, magnesium: 21, phosphorus: 76, potassium: 92, sodium: 2841, zinc: 1.2
},
'ç”œé¢é…±': {
    calories: 172, protein: 7.3, carbs: 28.7, fat: 3.4, fiber: 1.8, processing: 4,
    vitaminA: 0, vitaminC: 0, vitaminE: 0.09, vitaminB1: 0.15, vitaminB2: 0.31, vitaminB6: 0.16, folate: 52,
    calcium: 46, iron: 3.1, magnesium: 31, phosphorus: 86, potassium: 180, sodium: 2371, zinc: 1.1
},

// === æ–°å¢é¥®æ–™ç±» ===
'æ©™æ±': {
    calories: 45, protein: 0.7, carbs: 10.4, fat: 0.2, fiber: 0.2, processing: 2,
    vitaminA: 10, vitaminC: 50, vitaminE: 0.2, vitaminB1: 0.1, vitaminB2: 0.03, vitaminB6: 0.05, folate: 30,
    calcium: 11, iron: 0.2, magnesium: 11, phosphorus: 17, potassium: 200, sodium: 1, zinc: 0.08
},
'å¯ä¹': {
    calories: 42, protein: 0, carbs: 10.6, fat: 0, fiber: 0, processing: 5,
    vitaminA: 0, vitaminC: 0, vitaminE: 0, vitaminB1: 0, vitaminB2: 0, vitaminB6: 0, folate: 0,
    calcium: 5, iron: 0.1, magnesium: 1, phosphorus: 21, potassium: 1, sodium: 5, zinc: 0.01
},
'ç»¿èŒ¶': {
    calories: 1, protein: 0, carbs: 0.3, fat: 0, fiber: 0, processing: 2,
    vitaminA: 0, vitaminC: 0, vitaminE: 0, vitaminB1: 0, vitaminB2: 0.01, vitaminB6: 0, folate: 0,
    calcium: 0, iron: 0.02, magnesium: 1, phosphorus: 1, potassium: 8, sodium: 1, zinc: 0.01
},
'å•¤é…’': {
    calories: 43, protein: 0.5, carbs: 3.6, fat: 0, fiber: 0, processing: 3,
    vitaminA: 0, vitaminC: 0, vitaminE: 0, vitaminB1: 0.01, vitaminB2: 0.09, vitaminB6: 0.07, folate: 6,
    calcium: 4, iron: 0.02, magnesium: 6, phosphorus: 14, potassium: 27, sodium: 4, zinc: 0.01
},
'çº¢é…’': {
    calories: 83, protein: 0.1, carbs: 2.7, fat: 0, fiber: 0, processing: 2,
    vitaminA: 0, vitaminC: 0, vitaminE: 0, vitaminB1: 0.01, vitaminB2: 0.01, vitaminB6: 0.04, folate: 1,
    calcium: 8, iron: 0.5, magnesium: 10, phosphorus: 19, potassium: 127, sodium: 4, zinc: 0.1
},

// === æ–°å¢ä¸­å¼å®¶å¸¸èœ ===
'å®«ä¿é¸¡ä¸': {
    calories: 192, protein: 13.2, carbs: 9.8, fat: 11.5, fiber: 1.1, processing: 3,
    vitaminA: 30, vitaminC: 12, vitaminE: 1.1, vitaminB1: 0.1, vitaminB2: 0.12, vitaminB6: 0.3, folate: 15,
    calcium: 20, iron: 1.2, magnesium: 32, phosphorus: 170, potassium: 245, sodium: 385, zinc: 1.3
},
'éº»å©†è±†è…': {
    calories: 176, protein: 9.3, carbs: 5.2, fat: 13.4, fiber: 0.8, processing: 3,
    vitaminA: 15, vitaminC: 5, vitaminE: 0.9, vitaminB1: 0.09, vitaminB2: 0.09, vitaminB6: 0.13, folate: 21,
    calcium: 247, iron: 1.7, magnesium: 29, phosphorus: 120, potassium: 172, sodium: 498, zinc: 1.1
},
'ç³–é†‹é‡Œè„Š': {
    calories: 271, protein: 14.3, carbs: 30.2, fat: 10.5, fiber: 0.5, processing: 4,
    vitaminA: 6, vitaminC: 3.2, vitaminE: 0.6, vitaminB1: 0.42, vitaminB2: 0.18, vitaminB6: 0.3, folate: 4,
    calcium: 8, iron: 0.9, magnesium: 19, phosphorus: 148, potassium: 252, sodium: 450, zinc: 1.4
},
'é±¼é¦™è‚‰ä¸': {
    calories: 208, protein: 12.6, carbs: 13.5, fat: 11.8, fiber: 1.3, processing: 3,
    vitaminA: 68, vitaminC: 15.2, vitaminE: 0.8, vitaminB1: 0.37, vitaminB2: 0.15, vitaminB6: 0.24, folate: 10,
    calcium: 18, iron: 1.1, magnesium: 21, phosphorus: 143, potassium: 298, sodium: 480, zinc: 1.3
},
'çº¢çƒ§è‚‰': {
    calories: 297, protein: 11.2, carbs: 5.1, fat: 26.4, fiber: 0.3, processing: 3,
    vitaminA: 3, vitaminC: 1.2, vitaminE: 0.3, vitaminB1: 0.3, vitaminB2: 0.12, vitaminB6: 0.2, folate: 3,
    calcium: 11, iron: 0.9, magnesium: 16, phosphorus: 109, potassium: 197, sodium: 389, zinc: 1.9
},
'æ°´ç…®é±¼': {
    calories: 179, protein: 16.8, carbs: 3.5, fat: 11.2, fiber: 0.6, processing: 2,
    vitaminA: 18, vitaminC: 6.2, vitaminE: 1.1, vitaminB1: 0.08, vitaminB2: 0.09, vitaminB6: 0.24, folate: 9,
    calcium: 28, iron: 0.6, magnesium: 31, phosphorus: 205, potassium: 283, sodium: 510, zinc: 0.9
},
'é…¸è¾£æ±¤': {
    calories: 82, protein: 5.7, carbs: 8.2, fat: 3.1, fiber: 1.2, processing: 2,
    vitaminA: 52, vitaminC: 14.1, vitaminE: 0.9, vitaminB1: 0.06, vitaminB2: 0.11, vitaminB6: 0.14, folate: 29,
    calcium: 52, iron: 1.2, magnesium: 18, phosphorus: 85, potassium: 184, sodium: 420, zinc: 0.9
},
'åŒ—äº¬çƒ¤é¸­': {
    calories: 302, protein: 17.4, carbs: 0.2, fat: 25.3, fiber: 0, processing: 3,
    vitaminA: 80, vitaminC: 0, vitaminE: 0.9, vitaminB1: 0.2, vitaminB2: 0.19, vitaminB6: 0.29, folate: 15,
    calcium: 14, iron: 1.8, magnesium: 21, phosphorus: 198, potassium: 237, sodium: 520, zinc: 1.6
},
'å›é”…è‚‰': {
    calories: 284, protein: 13.8, carbs: 4.2, fat: 24.1, fiber: 0.7, processing: 3,
    vitaminA: 47, vitaminC: 26.3, vitaminE: 0.7, vitaminB1: 0.38, vitaminB2: 0.14, vitaminB6: 0.32, folate: 9,
    calcium: 15, iron: 1.2, magnesium: 19, phosphorus: 135, potassium: 252, sodium: 462, zinc: 1.8
},
'æ¸…è’¸é±¼': {
    calories: 119, protein: 20.3, carbs: 0.2, fat: 4.1, fiber: 0, processing: 1,
    vitaminA: 38, vitaminC: 1.5, vitaminE: 1.4, vitaminB1: 0.12, vitaminB2: 0.1, vitaminB6: 0.35, folate: 13,
    calcium: 32, iron: 0.7, magnesium: 32, phosphorus: 265, potassium: 327, sodium: 289, zinc: 0.8
},
'çº¢çƒ§æ’éª¨': {
    calories: 271, protein: 18.4, carbs: 7.5, fat: 18.9, fiber: 0.4, processing: 3,
    vitaminA: 12, vitaminC: 1.8, vitaminE: 0.5, vitaminB1: 0.58, vitaminB2: 0.18, vitaminB6: 0.32, folate: 6,
    calcium: 29, iron: 1.5, magnesium: 21, phosphorus: 182, potassium: 276, sodium: 538, zinc: 2.6
},

// === æ–°å¢è¥¿å¼å®¶å¸¸èœ ===
'æ„å¤§åˆ©è‚‰é…±é¢': {
    calories: 183, protein: 9.1, carbs: 24.2, fat: 5.8, fiber: 2.2, processing: 3,
    vitaminA: 58, vitaminC: 9.8, vitaminE: 1.3, vitaminB1: 0.24, vitaminB2: 0.15, vitaminB6: 0.12, folate: 34,
    calcium: 49, iron: 1.9, magnesium: 30, phosphorus: 111, potassium: 306, sodium: 392, zinc: 1.2
},
'åŒ¹è¨': {
    calories: 236, protein: 11.1, carbs: 26.1, fat: 10.4, fiber: 1.8, processing: 4,
    vitaminA: 140, vitaminC: 2.1, vitaminE: 1.68, vitaminB1: 0.36, vitaminB2: 0.24, vitaminB6: 0.1, folate: 46,
    calcium: 181, iron: 1.8, magnesium: 25, phosphorus: 214, potassium: 184, sodium: 598, zinc: 1.3
},
'æ±‰å ¡åŒ…': {
    calories: 254, protein: 13.3, carbs: 30.3, fat: 9.9, fiber: 1.6, processing: 4,
    vitaminA: 8, vitaminC: 1.2, vitaminE: 0.37, vitaminB1: 0.28, vitaminB2: 0.2, vitaminB6: 0.16, folate: 47,
    calcium: 74, iron: 2.7, magnesium: 27, phosphorus: 140, potassium: 202, sodium: 414, zinc: 1.7
},
'ç‚¸é¸¡': {
    calories: 288, protein: 24.2, carbs: 8.1, fat: 18.4, fiber: 0.4, processing: 4,
    vitaminA: 40, vitaminC: 0.3, vitaminE: 0.62, vitaminB1: 0.11, vitaminB2: 0.18, vitaminB6: 0.42, folate: 10,
    calcium: 20, iron: 1.4, magnesium: 27, phosphorus: 204, potassium: 248, sodium: 380, zinc: 1.3
},
'æ²™æ‹‰': {
    calories: 75, protein: 1.5, carbs: 5.8, fat: 5.1, fiber: 1.8, processing: 2,
    vitaminA: 162, vitaminC: 9.8, vitaminE: 0.5, vitaminB1: 0.07, vitaminB2: 0.06, vitaminB6: 0.11, folate: 78,
    calcium: 38, iron: 0.8, magnesium: 14, phosphorus: 28, potassium: 217, sodium: 160, zinc: 0.3
},
'ä¸‰æ˜æ²»': {
    calories: 243, protein: 11.3, carbs: 33.7, fat: 8.1, fiber: 2.4, processing: 3,
    vitaminA: 75, vitaminC: 3.2, vitaminE: 0.62, vitaminB1: 0.35, vitaminB2: 0.25, vitaminB6: 0.15, folate: 60,
    calcium: 87, iron: 2.9, magnesium: 36, phosphorus: 148, potassium: 232, sodium: 552, zinc: 1.4
},
'çƒ¤ç‰›æ’': {
    calories: 277, protein: 26.1, carbs: 0, fat: 18.5, fiber: 0, processing: 2,
    vitaminA: 1, vitaminC: 0, vitaminE: 0.52, vitaminB1: 0.08, vitaminB2: 0.2, vitaminB6: 0.37, folate: 9,
    calcium: 9, iron: 2.9, magnesium: 23, phosphorus: 214, potassium: 340, sodium: 60, zinc: 5.8
},
'çƒ¤é¸¡': {
    calories: 190, protein: 28.9, carbs: 0, fat: 7.4, fiber: 0, processing: 2,
    vitaminA: 22, vitaminC: 0, vitaminE: 0.29, vitaminB1: 0.08, vitaminB2: 0.18, vitaminB6: 0.61, folate: 6,
    calcium: 14, iron: 1.1, magnesium: 28, phosphorus: 214, potassium: 263, sodium: 77, zinc: 1.8
},
'é€šå¿ƒç²‰å¥¶é…ª': {
    calories: 164, protein: 6.7, carbs: 18.8, fat: 7.9, fiber: 0.9, processing: 4,
    vitaminA: 104, vitaminC: 0, vitaminE: 0.22, vitaminB1: 0.17, vitaminB2: 0.21, vitaminB6: 0.08, folate: 15,
    calcium: 134, iron: 0.7, magnesium: 18, phosphorus: 162, potassium: 121, sodium: 510, zinc: 0.9
},
'æ³•å¼è”¬èœæ±¤': {
    calories: 56, protein: 1.5, carbs: 10.1, fat: 1.2, fiber: 1.6, processing: 2,
    vitaminA: 532, vitaminC: 11.8, vitaminE: 0.37, vitaminB1: 0.05, vitaminB2: 0.04, vitaminB6: 0.12, folate: 19,
    calcium: 30, iron: 0.6, magnesium: 12, phosphorus: 38, potassium: 173, sodium: 285, zinc: 0.3
},

// === æ–°å¢ç²¥ã€ç³•ç‚¹ç±» ===
'çš®è›‹ç˜¦è‚‰ç²¥': {
    calories: 85, protein: 5.1, carbs: 12.3, fat: 1.8, fiber: 0.3, processing: 2,
    vitaminA: 48, vitaminC: 0.2, vitaminE: 0.42, vitaminB1: 0.07, vitaminB2: 0.15, vitaminB6: 0.08, folate: 12,
    calcium: 38, iron: 1.1, magnesium: 14, phosphorus: 72, potassium: 85, sodium: 365, zinc: 0.8
},
'ç™½ç²¥': {
    calories: 49, protein: 1, carbs: 11, fat: 0.1, fiber: 0.2, processing: 2,
    vitaminA: 0, vitaminC: 0, vitaminE: 0.01, vitaminB1: 0.01, vitaminB2: 0.01, vitaminB6: 0.02, folate: 2,
    calcium: 3, iron: 0.1, magnesium: 3, phosphorus: 12, potassium: 15, sodium: 1, zinc: 0.3
},
'ç»¿è±†ç²¥': {
    calories: 72, protein: 3.2, carbs: 14.6, fat: 0.2, fiber: 1.8, processing: 2,
    vitaminA: 1, vitaminC: 0.2, vitaminE: 0.1, vitaminB1: 0.1, vitaminB2: 0.05, vitaminB6: 0.07, folate: 69,
    calcium: 13, iron: 0.8, magnesium: 23, phosphorus: 45, potassium: 125, sodium: 2, zinc: 0.4
},
'å…«å®ç²¥': {
    calories: 116, protein: 2.7, carbs: 24.5, fat: 1.3, fiber: 1.2, processing: 3,
    vitaminA: 1, vitaminC: 0.3, vitaminE: 0.15, vitaminB1: 0.05, vitaminB2: 0.04, vitaminB6: 0.06, folate: 11,
    calcium: 18, iron: 0.9, magnesium: 12, phosphorus: 33, potassium: 82, sodium: 8, zinc: 0.5
},
'è‚‰ç²½': {
    calories: 196, protein: 5.4, carbs: 33.7, fat: 5.1, fiber: 1.5, processing: 3,
    vitaminA: 15, vitaminC: 0, vitaminE: 0.2, vitaminB1: 0.08, vitaminB2: 0.04, vitaminB6: 0.11, folate: 24,
    calcium: 12, iron: 1.3, magnesium: 18, phosphorus: 61, potassium: 106, sodium: 286, zinc: 0.9
},
'éº»å›¢': {
    calories: 321, protein: 5.8, carbs: 44.6, fat: 13.9, fiber: 1.3, processing: 4,
    vitaminA: 0, vitaminC: 0, vitaminE: 0.3, vitaminB1: 0.16, vitaminB2: 0.06, vitaminB6: 0.04, folate: 25,
    calcium: 20, iron: 1.4, magnesium: 19, phosphorus: 58, potassium: 87, sodium: 178, zinc: 0.6
},
'æ˜¥å·': {
    calories: 198, protein: 5.3, carbs: 21.3, fat: 10.8, fiber: 1.7, processing: 4,
    vitaminA: 142, vitaminC: 8.6, vitaminE: 0.9, vitaminB1: 0.1, vitaminB2: 0.08, vitaminB6: 0.13, folate: 32,
    calcium: 20, iron: 1.2, magnesium: 16, phosphorus: 62, potassium: 152, sodium: 334, zinc: 0.5
},
'æ²¹æ¡': {
    calories: 389, protein: 8.6, carbs: 38.3, fat: 23.7, fiber: 1.4, processing: 4,
    vitaminA: 0, vitaminC: 0, vitaminE: 0.15, vitaminB1: 0.25, vitaminB2: 0.09, vitaminB6: 0.03, folate: 69,
    calcium: 43, iron: 2.1, magnesium: 23, phosphorus: 92, potassium: 104, sodium: 460, zinc: 0.8
},
'ç…é¥¼æœå­': {
    calories: 240, protein: 6.8, carbs: 30.5, fat: 10.9, fiber: 1.9, processing: 3,
    vitaminA: 48, vitaminC: 1.2, vitaminE: 0.74, vitaminB1: 0.19, vitaminB2: 0.13, vitaminB6: 0.06, folate: 45,
    calcium: 35, iron: 2.4, magnesium: 22, phosphorus: 93, potassium: 137, sodium: 580, zinc: 0.7
},
'é¥ºå­': {
    calories: 197, protein: 8.5, carbs: 33.1, fat: 4.1, fiber: 1.6, processing: 3,
    vitaminA: 18, vitaminC: 2.7, vitaminE: 0.25, vitaminB1: 0.2, vitaminB2: 0.09, vitaminB6: 0.11, folate: 37,
    calcium: 28, iron: 1.8, magnesium: 21, phosphorus: 89, potassium: 159, sodium: 341, zinc: 0.9
},
'ç‚’é¥­': {
    calories: 186, protein: 5.3, carbs: 29.1, fat: 5.7, fiber: 1.2, processing: 3,
    vitaminA: 49, vitaminC: 4.3, vitaminE: 0.54, vitaminB1: 0.12, vitaminB2: 0.07, vitaminB6: 0.1, folate: 18,
    calcium: 20, iron: 0.8, magnesium: 18, phosphorus: 71, potassium: 116, sodium: 321, zinc: 0.8
},
'ç‚’é¢': {
    calories: 237, protein: 8.8, carbs: 38.4, fat: 6.3, fiber: 2.3, processing: 3,
    vitaminA: 62, vitaminC: 13.1, vitaminE: 0.7, vitaminB1: 0.18, vitaminB2: 0.1, vitaminB6: 0.13, folate: 32,
    calcium: 30, iron: 1.7, magnesium: 29, phosphorus: 98, potassium: 172, sodium: 497, zinc: 1.1
},
    // === çƒ¹é¥ªæ–¹å¼å½±å“ç³»æ•°ï¼ˆå¿…é¡»æ”¾åœ¨æœ€åï¼‰ ===
    cooking_effects: {
        stir_fry: { vitaminC_retention: 0.8, vitaminB_retention: 0.9, mineral_retention: 0.95, fat_addition: 2.5 },
        steaming: { vitaminC_retention: 0.9, vitaminB_retention: 0.95, mineral_retention: 0.98 },
        boiling: { vitaminC_retention: 0.7, vitaminB_retention: 0.8, mineral_retention: 0.85 },
        frying: { vitaminC_retention: 0.6, vitaminB_retention: 0.7, mineral_retention: 0.7, fat_addition: 8 },
        pan_frying: { vitaminC_retention: 0.8, vitaminB_retention: 0.85, mineral_retention: 0.9, fat_addition: 4 }
    }
}

// ========== çƒ¹é¥ªæ–¹å¼å¯¹è¥å…»å½±å“çš„ç®—æ³• ==========
function applyCookingEffects(originalFood, cookingMethod) {
  const modifiedFood = JSON.parse(JSON.stringify(originalFood));
  const cookingMethodMap = {
    'ç‚’': 'stir_fry', 'è’¸': 'steaming', 'æ°´ç…®': 'boiling', 'ç…®': 'boiling',
    'ç‚¸': 'frying', 'æ²¹ç‚¸': 'frying', 'ç…': 'pan_frying'
  };
  const method = cookingMethodMap[cookingMethod] || 'stir_fry';
  const effects = foodDatabase.cooking_effects[method];
  if (!effects) return modifiedFood;
  if (effects.vitaminC_retention) modifiedFood.vitaminC *= effects.vitaminC_retention;
  if (effects.vitaminB_retention) {
    modifiedFood.vitaminB1 *= effects.vitaminB_retention;
    modifiedFood.vitaminB2 *= effects.vitaminB_retention;
    modifiedFood.vitaminB6 *= effects.vitaminB_retention;
    modifiedFood.folate *= effects.vitaminB_retention;
  }
  if (effects.mineral_retention) {
    modifiedFood.calcium *= effects.mineral_retention;
    modifiedFood.iron *= effects.mineral_retention;
    modifiedFood.magnesium *= effects.mineral_retention;
    modifiedFood.phosphorus *= effects.mineral_retention;
    modifiedFood.potassium *= effects.mineral_retention;
    modifiedFood.zinc *= effects.mineral_retention;
  }
  if (effects.fat_addition) {
    modifiedFood.fat += effects.fat_addition;
    modifiedFood.calories += effects.fat_addition * 9;
  }
  if (effects.calories_addition) modifiedFood.calories += effects.calories_addition;
  if (method === 'frying') modifiedFood.processing = Math.min(5, modifiedFood.processing + 2);
  else if (method === 'stir_fry' || method === 'pan_frying') modifiedFood.processing = Math.min(5, modifiedFood.processing + 1);
  if (method === 'stir_fry' || method === 'frying' || method === 'pan_frying') modifiedFood.carbs += 1.5;
  if (method === 'frying') modifiedFood.calories = Math.round(modifiedFood.calories * 1.2);
  Object.keys(modifiedFood).forEach(key => {
    if (typeof modifiedFood[key] === 'number' && key !== 'processing') modifiedFood[key] = Math.round(modifiedFood[key] * 100) / 100;
  });
  return modifiedFood;
}
</script>
<script>
// ========== åº”ç”¨çŠ¶æ€ç®¡ç† ==========
let appState = {
    userInfo: {},
    meals: [],
    currentMeal: 1,
    currentDay: 1,
    plan: {},
    dailyNutrition: { calories: 0, protein: 0, carbs: 0, fat: 0, fiber: 0 },
    dailyScores: [],
    nutritionAccuracyStats: { correct: 0, total: 0, usda_matched: 0 }
};

// ========== å…¨å±€å˜é‡ ==========
// è´ªåƒè›‡ç›¸å…³å…¨å±€å˜é‡
let canFeedSnake = false; // æ˜¯å¦å¯ä»¥æŠ•å–‚å°è›‡
let isFeedingSnake = false; // æ˜¯å¦æ­£åœ¨æŠ•å–‚å°è›‡
let hasFedSnakeToday = false; // ä»Šå¤©æ˜¯å¦å·²ç»æŠ•å–‚è¿‡å°è›‡
let lastFeedDate = ''; // æœ€åæŠ•å–‚æ—¥æœŸ

// æ›´æ–°æŠ•å–‚æŒ‰é’®çŠ¶æ€
function updateFeedButtonState() {
  const feedButton = document.getElementById('btnFeedSnake');
  if (!feedButton) return;
  
  // è·å–æœ€åä¸€é¤çš„æ—¥æœŸ
  if (appState.meals.length === 0) {
    canFeedSnake = false;
  } else {
    const lastMealDate = appState.meals[appState.meals.length - 1].date;
    const mealsToday = appState.meals.filter(m => m.date === lastMealDate);
    const planFat = appState.plan.targetFat || 0;
    const realFat = appState.dailyNutrition.fat || 0;
    
    console.log("æ£€æŸ¥æŠ•å–‚æ¡ä»¶:", mealsToday.length, "é¤, è®¡åˆ’è„‚è‚ª:", planFat, "å®é™…è„‚è‚ª:", realFat);
    
    // æ¡ä»¶æ£€æŸ¥: åŒä¸€å¤©ä¸‰é¤éƒ½å½•å…¥äº† + ä»Šå¤©è„‚è‚ªæ‘„å…¥æœªè¾¾æ ‡ + ä»Šå¤©æ²¡æŠ•å–‚è¿‡
    canFeedSnake = mealsToday.length >= 3 && realFat < planFat && 
                  (!hasFedSnakeToday || lastFeedDate !== lastMealDate);
  }
  
  console.log("æŠ•å–‚æŒ‰é’®çŠ¶æ€:", canFeedSnake, !isFeedingSnake);
  
  if (canFeedSnake && !isFeedingSnake) {
    feedButton.style.backgroundColor = '#41b348';
    feedButton.style.cursor = 'pointer';
    feedButton.disabled = false;
  } else {
    feedButton.style.backgroundColor = '#e25555';
    feedButton.style.cursor = 'not-allowed';
    feedButton.disabled = true;
  }
}

// ========== é¡µé¢åˆ‡æ¢ ==========
function switchToMainPage() {
    document.getElementById('mainPage').style.display = 'flex';
    document.getElementById('dataPage').style.display = 'none';
}
function switchToDataPage() {
    document.getElementById('mainPage').style.display = 'none';
    document.getElementById('dataPage').style.display = 'block';
    // æ•°æ®é¡µè¿›åº¦æ¡æ˜¾ç¤ºï¼ˆç¡®ä¿ data-progressSection æ˜¾ç¤ºï¼‰
    var section = document.getElementById('data-progressSection');
    if(section) section.style.display = '';
    // æ˜¾ç¤ºè¥å…»å‡†ç¡®æ€§ä¿¡æ¯
    const accuracyInfo = document.getElementById('nutritionAccuracyInfo');
    if (accuracyInfo) {
        accuracyInfo.style.display = 'block';
    }
    // åˆ·æ–°æ•°æ®é¡µå†…å®¹
    updateDataProgressBars();
    updateDataPageCharts && updateDataPageCharts();
}

// ========== èœå•åˆ‡æ¢åŠŸèƒ½ (iOSå…¼å®¹å¢å¼ºç‰ˆæœ¬) ==========
let isMenuOpen = false;
let menuButton = null;
let navDropdown = null;

function toggleNavMenu() {
    console.log('Menu toggle called, current state:', isMenuOpen);
    
    if (!navDropdown) {
        navDropdown = document.querySelector('.nav-dropdown');
    }
    
    if (isMenuOpen) {
        // å…³é—­èœå•
        navDropdown.classList.remove('active');
        isMenuOpen = false;
        console.log('Menu closed');
    } else {
        // æ‰“å¼€èœå•
        navDropdown.classList.add('active');
        isMenuOpen = true;
        console.log('Menu opened');
    }
}

// å…³é—­èœå•çš„å‡½æ•°
function closeNavMenu() {
    if (!navDropdown) {
        navDropdown = document.querySelector('.nav-dropdown');
    }
    if (navDropdown) {
        navDropdown.classList.remove('active');
        isMenuOpen = false;
        console.log('Menu force closed');
    }
}

// é¡µé¢åŠ è½½å®Œæˆåè®¾ç½®äº‹ä»¶ç›‘å¬
document.addEventListener('DOMContentLoaded', function() {
    console.log('Setting up menu events');
    
    // è·å–å…ƒç´ å¼•ç”¨
    menuButton = document.getElementById('navMenuBtn');
    navDropdown = document.querySelector('.nav-dropdown');
    
    if (menuButton && navDropdown) {
        console.log('Menu elements found');
        
        // æ¸…é™¤ç°æœ‰äº‹ä»¶
        menuButton.removeAttribute('onclick');
        
        // åˆ›å»ºç»Ÿä¸€çš„ç‚¹å‡»å¤„ç†å‡½æ•°
        function handleMenuClick(e) {
            console.log('Menu button event triggered:', e.type);
            e.preventDefault();
            e.stopPropagation();
            e.stopImmediatePropagation();
            
            // å°å»¶è¿Ÿç¡®ä¿äº‹ä»¶å¤„ç†å®Œæˆ
            setTimeout(toggleNavMenu, 10);
            return false;
        }
        
        // ç»‘å®šç‚¹å‡»å’Œè§¦æ‘¸äº‹ä»¶
        menuButton.addEventListener('click', handleMenuClick, { capture: true, passive: false });
        menuButton.addEventListener('touchend', handleMenuClick, { capture: true, passive: false });
        
        // é˜²æ­¢è§¦æ‘¸å¼€å§‹æ—¶çš„é»˜è®¤è¡Œä¸º
        menuButton.addEventListener('touchstart', function(e) {
            e.preventDefault();
        }, { passive: false });
        
    } else {
        console.error('Menu elements not found!');
    }
    
    // ç‚¹å‡»é¡µé¢å…¶ä»–ä½ç½®å…³é—­èœå•
    function handleDocumentClick(event) {
        if (!navDropdown || !menuButton) return;
        
        // æ£€æŸ¥æ˜¯å¦ç‚¹å‡»åœ¨èœå•åŒºåŸŸå¤–
        if (!navDropdown.contains(event.target) && event.target !== menuButton) {
            closeNavMenu();
        }
    }
    
    // å»¶è¿Ÿç»‘å®šæ–‡æ¡£äº‹ä»¶ï¼Œé¿å…ç«‹å³è§¦å‘
    setTimeout(function() {
        document.addEventListener('click', handleDocumentClick, { capture: true });
        document.addEventListener('touchstart', handleDocumentClick, { capture: true });
    }, 100);
    
    // èœå•é¡¹ç‚¹å‡»åå…³é—­èœå•
   setTimeout(function() {
    const navLinks = document.querySelectorAll('.nav-content a');
    navLinks.forEach(function(link) {
        link.addEventListener('click', function(e) {
            e.preventDefault(); // é˜»æ­¢ <a> è·³è½¬
            const action = link.getAttribute('data-action');
            // èœå•é€»è¾‘
            if (action === 'mainPage') {
                switchToMainPage();
            } else if (action === 'dataPage') {
                switchToDataPage();
            } else if (action === 'reset') {
                resetApp();
            }
            setTimeout(closeNavMenu, 50);
        }, false);
        // å¦‚é‡å®‰å“éƒ¨åˆ†æµè§ˆå™¨ touchend ä¸å†’æ³¡ï¼Œå¯è€ƒè™‘è¡¥å……ç»‘å®š
        link.addEventListener('touchend', function(e) {
            e.preventDefault();
            const action = link.getAttribute('data-action');
            if (action === 'mainPage') {
                switchToMainPage();
            } else if (action === 'dataPage') {
                switchToDataPage();
            } else if (action === 'reset') {
                resetApp();
            }
            setTimeout(closeNavMenu, 50);
        }, false);
    });
}, 200);
});

// ========== æ—¥å¿—ä¸æ¶ˆæ¯ ==========
function addMessage(sender, message) {
    const chatArea = document.getElementById('mealFeedback');
    chatArea.innerHTML = `<div class="message ${sender}">${message}</div>`;
}
function addLogEntry(message, type = 'info') {
    // æš‚æ—¶ç¦ç”¨æ—¥å¿—åŠŸèƒ½ï¼Œé˜²æ­¢æŠ¥é”™å¯¼è‡´ä¸»é¡µé¢å¤±æ•ˆ
    return;
}

// ========== BMRä¸ç›®æ ‡å¡è·¯é‡Œ ==========
function calculateBMR(gender, weight, height, age) {
    let bmr;
    if (gender === 'male') {
        bmr = 88.362 + (13.397 * weight) + (4.799 * height) - (5.677 * age);
    } else {
        bmr = 447.593 + (9.247 * weight) + (3.098 * height) - (4.330 * age);
    }
    addLogEntry(`BMRè®¡ç®—: ${gender === 'male' ? 'ç”·æ€§' : 'å¥³æ€§'}, ${weight}kg, ${height}cm, ${age}å² => ${bmr.toFixed(1)} kcal`, 'calculation');
    return bmr;
}
function calculateTargetCalories(bmr, goal) {
    const activityFactor = 1.6;
    const maintenanceCalories = bmr * activityFactor;
    let targetCalories;
    switch (goal) {
        case 'lose': targetCalories = maintenanceCalories - 500; break;
        case 'gain': targetCalories = maintenanceCalories + 300; break;
        default: targetCalories = maintenanceCalories;
    }
    addLogEntry(`ç›®æ ‡å¡è·¯é‡Œè®¡ç®—: BMR(${bmr.toFixed(1)}) * æ´»åŠ¨ç³»æ•°(${activityFactor}) = ${maintenanceCalories.toFixed(1)} => ç›®æ ‡: ${targetCalories.toFixed(1)} kcal`, 'calculation');
    return targetCalories;
}

// ========== ç”¨æˆ·ä¿¡æ¯æäº¤ ==========
function submitPersonalInfo() {
    const gender = document.getElementById('gender').value;
    const height = parseFloat(document.getElementById('height').value);
    const weight = parseFloat(document.getElementById('weight').value);
    const age = parseInt(document.getElementById('age').value);
    const goal = document.getElementById('goal').value;

    if (!gender || !height || !weight || !age || !goal) {
        alert('è¯·å¡«å†™æ‰€æœ‰å­—æ®µ');
        return;
    }
    setTimeout(() => {
        appState.userInfo = { gender, height, weight, age, goal };
        const bmr = calculateBMR(gender, weight, height, age);
        const targetCalories = calculateTargetCalories(bmr, goal);
        const targetProtein = Math.round(weight * (goal === 'gain' ? 2.2 : goal === 'lose' ? 1.8 : 1.2));
        const targetCarbs = Math.round(targetCalories * 0.5 / 4);
        const targetFat = Math.round(targetCalories * 0.25 / 9);
        const targetFiber = Math.round(weight * 0.4);

        appState.plan = {
            bmr: Math.round(bmr),
            targetCalories: Math.round(targetCalories),
            targetProtein,
            targetCarbs,
            targetFat,
            targetFiber,
            expectedDays: 30
        };
document.getElementById('mealInputArea').scrollIntoView({ behavior: 'smooth', block: 'start' });

        // æ›´æ–°ç•Œé¢
document.getElementById('personalInfoArea').style.display = 'none';
document.getElementById('mainPage').style.display = 'flex';
document.getElementById('dataPage').style.display = 'none';
document.getElementById('mealInputArea').style.display = 'block';
document.getElementById('progressHealthArea').style.display = 'block';

    
        const goalText = goal === 'gain' ? 'ğŸ’ª å¢è‚Œå¡‘å½¢' : goal === 'lose' ? 'ğŸ”¥ å‡è„‚ç˜¦èº«' : 'âš–ï¸ å¹³è¡¡è¥å…»';
        addLogEntry(`ç”¨æˆ·æ¡£æ¡ˆåˆå§‹åŒ–å®Œæˆ: ${gender === 'male' ? 'ç”·æ€§' : 'å¥³æ€§'}, ${height}cm, ${weight}kg, ${age}å², ç›®æ ‡: ${goalText}`, 'success');
        addLogEntry(`è¥å…»è®¡åˆ’ç”Ÿæˆ: ${Math.round(targetCalories)}kcal, è›‹ç™½è´¨: ${targetProtein}g, ç¢³æ°´: ${targetCarbs}g, è„‚è‚ª: ${targetFat}g, çº¤ç»´: ${targetFiber}g`, 'success');
           }, 1000);
}

// ========== V4.4é£Ÿç‰©æ™ºèƒ½è§£æä¸»å‡½æ•° ==========
function parseFoodInput(foodInput) {
    const nutrition = {
        calories: 0, protein: 0, carbs: 0, fat: 0, fiber: 0, processing: 0,
        vitaminA: 0, vitaminC: 0, vitaminE: 0, vitaminB1: 0, vitaminB2: 0, vitaminB6: 0, folate: 0,
        calcium: 0, iron: 0, magnesium: 0, phosphorus: 0, potassium: 0, sodium: 0, zinc: 0
    };
    const items = foodInput.split(/[ï¼Œ,ã€]/);
    let totalWeight = 0, recognizedItems = 0, totalProcessingScore = 0, micronutrientTypes = new Set(), usdaMatches = 0;
    addLogEntry(`V4.4è§£æé£Ÿç‰©è¾“å…¥: "${foodInput}"`, 'calculation');

    items.forEach(item => {
        let foodName = item.trim();
        let amount = 100;
        const match = foodName.match(/(.+?)(\d+)g?/);
        if (match) {
            foodName = match[1].trim();
            amount = parseInt(match[2]);
        } else {
            const numMatch = foodName.match(/(.*?)([ä¸€äºŒä¸‰å››äº”å…­ä¸ƒå…«ä¹å\d]+)ä¸ª?(.+)/);
            if (numMatch) {
                const num = numMatch[2];
                const itemName = numMatch[3] || numMatch[1];
                const numValue = isNaN(parseInt(num)) ?
                    {'ä¸€': 1, 'äºŒ': 2, 'ä¸‰': 3, 'å››': 4, 'äº”': 5}[num] || 1 : parseInt(num);
                if (itemName.includes('åŒ…å­')) amount = numValue * 80;
                else if (itemName.includes('é¥ºå­')) amount = numValue * 25;
                else if (itemName.includes('é¸¡è›‹')) amount = numValue * 50;
                else amount = numValue * 50;
                foodName = itemName;
            }
        }
        totalWeight += amount;

        let foundFood = null, matchedKey = '', isUsdaMatch = false;
        if (foodDatabase[foodName]) {
            foundFood = foodDatabase[foodName]; matchedKey = foodName; isUsdaMatch = true;
        } else {
            const cookingMethods = ['ç‚’', 'è’¸', 'æ°´ç…®', 'ç‚¸', 'çƒ¤', 'ç…', 'ç…®'];
            let baseFoodName = foodName, cookingMethod = null;
            for (const method of cookingMethods) {
                if (foodName.includes(method)) {
                    baseFoodName = foodName.replace(method, '').trim(); cookingMethod = method; break;
                }
            }
            const possibleNames = [
                foodName, cookingMethod ? (cookingMethod + baseFoodName) : null,
                cookingMethod ? (baseFoodName + cookingMethod) : null, baseFoodName
            ].filter(Boolean);

            for (const possibleName of possibleNames) {
                if (foodDatabase[possibleName]) {
                    foundFood = foodDatabase[possibleName]; matchedKey = possibleName; isUsdaMatch = true; break;
                }
            }
            if (!foundFood) {
                for (const [key, value] of Object.entries(foodDatabase)) {
                    if (key === 'cooking_effects') continue;
                    if (baseFoodName.includes(key) || key.includes(baseFoodName)) {
                        foundFood = value; matchedKey = key;
                        if (cookingMethod && !foodName.includes(matchedKey)) {
                            foundFood = applyCookingEffects(foundFood, cookingMethod);
                            matchedKey += `(${cookingMethod}å¤„ç†)`;
                        }
                        isUsdaMatch = true; break;
                    }
                }
            }
        }

        if (foundFood) {
            const factor = amount / 100;
            nutrition.calories += foundFood.calories * factor;
            nutrition.protein += foundFood.protein * factor;
            nutrition.carbs += foundFood.carbs * factor;
            nutrition.fat += foundFood.fat * factor;
            nutrition.fiber += foundFood.fiber * factor;
            totalProcessingScore += (foundFood.processing || 1) * amount;
            nutrition.vitaminA += foundFood.vitaminA * factor;
            nutrition.vitaminC += foundFood.vitaminC * factor;
            nutrition.vitaminE += foundFood.vitaminE * factor;
            nutrition.vitaminB1 += foundFood.vitaminB1 * factor;
            nutrition.vitaminB2 += foundFood.vitaminB2 * factor;
            nutrition.vitaminB6 += foundFood.vitaminB6 * factor;
            nutrition.folate += foundFood.folate * factor;
            nutrition.calcium += foundFood.calcium * factor;
            nutrition.iron += foundFood.iron * factor;
            nutrition.magnesium += foundFood.magnesium * factor;
            nutrition.phosphorus += foundFood.phosphorus * factor;
            nutrition.potassium += foundFood.potassium * factor;
            nutrition.sodium += foundFood.sodium * factor;
            nutrition.zinc += foundFood.zinc * factor;
            const micronutrients = ['vitaminA', 'vitaminC', 'vitaminE', 'vitaminB1', 'vitaminB2', 'vitaminB6', 'folate', 'calcium', 'iron', 'magnesium', 'phosphorus', 'potassium', 'zinc'];
            micronutrients.forEach(nutrient => {
                if (foundFood[nutrient] * factor > 0.1) { micronutrientTypes.add(nutrient); }
            });
            recognizedItems++;
            if (isUsdaMatch) usdaMatches++;
            appState.nutritionAccuracyStats.correct++;
            appState.nutritionAccuracyStats.total++;
            if (isUsdaMatch) appState.nutritionAccuracyStats.usda_matched++;
            addLogEntry(`USDAåŒ¹é…æˆåŠŸ: "${foodName}" (${amount}g) => ${matchedKey} | +${(foundFood.calories * factor).toFixed(1)}kcal, è„‚è‚ª: ${(foundFood.fat * factor).toFixed(1)}g`, 'calculation');
        } else {
            appState.nutritionAccuracyStats.total++;
            addLogEntry(`é£Ÿç‰©æœªè¯†åˆ«: "${foodName}" (${amount}g) - å»ºè®®æ ‡æ˜çƒ¹é¥ªæ–¹å¼`, 'warning');
        }
    });

    nutrition.processing = totalWeight > 0 ? Math.round(totalProcessingScore / totalWeight) : 0;
    return {
        calories: Math.round(nutrition.calories),
        protein: Math.round(nutrition.protein * 10) / 10,
        carbs: Math.round(nutrition.carbs * 10) / 10,
        fat: Math.round(nutrition.fat * 10) / 10,
        fiber: Math.round(nutrition.fiber * 10) / 10,
        processing: nutrition.processing,
        recognizedItems, totalItems: items.length, usdaMatches, micronutrientCount: micronutrientTypes.size,
        vitaminA: Math.round(nutrition.vitaminA * 100) / 100,
        vitaminC: Math.round(nutrition.vitaminC * 100) / 100,
        vitaminE: Math.round(nutrition.vitaminE * 100) / 100,
        vitaminB1: Math.round(nutrition.vitaminB1 * 100) / 100,
        vitaminB2: Math.round(nutrition.vitaminB2 * 100) / 100,
        vitaminB6: Math.round(nutrition.vitaminB6 * 100) / 100,
        folate: Math.round(nutrition.folate * 100) / 100,
        calcium: Math.round(nutrition.calcium * 100) / 100,
        iron: Math.round(nutrition.iron * 100) / 100,
        magnesium: Math.round(nutrition.magnesium * 100) / 100,
        phosphorus: Math.round(nutrition.phosphorus * 100) / 100,
        potassium: Math.round(nutrition.potassium * 100) / 100,
        sodium: Math.round(nutrition.sodium * 100) / 100,
        zinc: Math.round(nutrition.zinc * 100) / 100
    };
}

</script>
<script>
// ========== é¤é£Ÿå½•å…¥æäº¤ ==========
// ========== å…¨å±€å˜é‡ ==========
// ========== é¤é£Ÿå½•å…¥æäº¤ ==========
function submitMeal() {
    const inputRaw = document.getElementById('mealInputRaw').value.trim();
    if (!inputRaw) {
        addMessage('user', 'è¯·å½•å…¥æœ¬é¤æ•°æ®ï¼');
        return;
    }
    // æ ¼å¼ï¼š20250527-0830-32-ä¸¤ä¸ªåŒ…å­ï¼Œç‚’çŒªè‚‰200gï¼Œè‰è“80g
    const match = inputRaw.match(/^(\d{8})-(\d{4})-(\d{1,3})-(.+)$/);
    if (!match) {
        addMessage('user', 'æ ¼å¼é”™è¯¯ã€‚è¯·å‚è€ƒï¼š20250527-0830-32-ä¸¤ä¸ªåŒ…å­ï¼Œç‚’çŒªè‚‰200gï¼Œè‰è“80g');
        return;
    }
    const date = match[1];
    const time = match[2];
    const duration = parseInt(match[3]);
    const mealContent = match[4];
    if (duration < 5 || duration > 120) {
        addMessage('user', 'ç”¨é¤æ—¶é•¿åº”åœ¨5~120åˆ†é’Ÿä¹‹é—´');
        return;
    }
    const nutrition = parseFoodInput(mealContent);
    appState.meals.push({
        date,        // 20250527
        time,        // 0830
        duration,    // 32
        mealContent, // ä¸¤ä¸ªåŒ…å­ï¼Œç‚’çŒªè‚‰200gï¼Œè‰è“80g
        nutrition,
        mealNumber: appState.meals.filter(m => m.date === date).length + 1,
        food: mealContent
    });

    // æ›´æ–°æ¯æ—¥è¥å…»æ€»è®¡
   // å½•å…¥åï¼Œé‡æ–°ç»Ÿè®¡ä»Šæ—¥æ‘„å…¥ï¼ˆä»…å½“å¤©ä¸‰é¤ç´¯è®¡ï¼‰
const mealsToday = appState.meals.filter(m => m.date === date);
appState.dailyNutrition = { calories:0, protein:0, carbs:0, fat:0, fiber:0 };
mealsToday.forEach(m => {
    appState.dailyNutrition.calories += m.nutrition.calories;
    appState.dailyNutrition.protein  += m.nutrition.protein;
    appState.dailyNutrition.carbs    += m.nutrition.carbs;
    appState.dailyNutrition.fat      += m.nutrition.fat;
    appState.dailyNutrition.fiber    += m.nutrition.fiber;
});
    generateMealFeedback(appState.meals[appState.meals.length-1]);
    updateProgressBars();
    updateDailyHealthScore();
       // ç»Ÿè®¡ä»Šæ—¥å·²å½•å…¥é¤æ•°ï¼Œå½“å‰é¤ä¸ºâ€œå·²å½•å…¥+1â€
// ç»Ÿè®¡å½“å‰è¾“å…¥é¤çš„æ—¥æœŸ
const todayMeals = appState.meals.filter(m => m.date === date);
let nextMealNumber = todayMeals.length + 1;
if (nextMealNumber > 3) nextMealNumber = 1;
appState.currentMeal = nextMealNumber;
document.getElementById('mealNumber').textContent = nextMealNumber;
    document.getElementById('mealInputRaw').value = '';
}
// åˆ›å»ºè„‚è‚ªå°çƒ
function createFatBalls() {
  console.log("åˆ›å»ºè„‚è‚ªçƒå‡½æ•°è¢«è°ƒç”¨");
  
  const planFat = appState.plan.targetFat || 0;
  const realFat = appState.dailyNutrition.fat || 0;
  
  console.log("è®¡åˆ’è„‚è‚ª:", planFat, "å®é™…è„‚è‚ª:", realFat);
  
  if (realFat >= planFat) {
    console.log("æ²¡æœ‰è„‚è‚ªå·®å€¼ï¼Œä¸åˆ›å»ºå°çƒ");
    return 0; // æ²¡æœ‰å·®å€¼ï¼Œä¸åˆ›å»ºå°çƒ
  }
  
  // å‡½æ•°å…¶ä½™éƒ¨åˆ†ä¿æŒä¸å˜...  
  const fatDiff = planFat - realFat; // å·®å€¼ï¼Œå³çœä¸‹çš„è„‚è‚ª
  const fatBar = document.getElementById('progressFat');
  const fatBarContainer = fatBar.parentElement;
  const fatBarWidth = fatBarContainer.offsetWidth;
  const fatBarPercent = Math.min(100, Math.round((realFat / planFat) * 100));
  const ballsStartPosPercent = fatBarPercent; // å°çƒå¼€å§‹çš„ä½ç½®ç™¾åˆ†æ¯”
  
  // è®¡ç®—å¯ä»¥åˆ›å»ºå¤šå°‘ä¸ªå°çƒ
  const ballSize = 18; // å°çƒç›´å¾„
  const ballSpacing = 10; // å°çƒé—´è·
  const ballArea = fatBarWidth * (100 - ballsStartPosPercent) / 100; // å¯ç”¨åŒºåŸŸå®½åº¦
  const maxBalls = Math.floor(ballArea / (ballSize + ballSpacing)); // æœ€å¤§å¯æ”¾ç½®çƒæ•°
  
  // ç¡®å®šè¦æ˜¾ç¤ºçš„çƒçš„æ•°é‡ï¼Œæœ€å°‘2ä¸ªï¼Œæœ€å¤šmaxBallsä¸ª
  const ballCount = Math.max(2, Math.min(maxBalls, Math.ceil(fatDiff)));
  
  // åˆ›å»ºå°çƒ
  const ballsContainer = document.getElementById('fatBallsContainer');
  ballsContainer.innerHTML = ''; // æ¸…ç©ºå®¹å™¨
  ballsContainer.style.left = `${ballsStartPosPercent}%`;
  ballsContainer.style.width = `${100 - ballsStartPosPercent}%`;
  ballsContainer.style.display = 'flex';
  ballsContainer.style.alignItems = 'center';
  ballsContainer.style.justifyContent = 'space-around';
  
  for (let i = 0; i < ballCount; i++) {
    const ball = document.createElement('div');
    ball.className = 'fat-ball';
    ball.style.width = `${ballSize}px`;
    ball.style.height = `${ballSize}px`;
    ball.style.borderRadius = '50%';
    ball.style.backgroundColor = '#ff7aa0';
    ball.style.boxShadow = '0 0 5px #ff4d7e';
    ball.style.position = 'relative';
    ball.dataset.index = i;
    ballsContainer.appendChild(ball);
  }
  
  return ballCount;
}

// å°è›‡æŠ•å–‚åŠ¨ç”»
function startSnakeFeeding() {
  console.log("å¼€å§‹å°è¯•æŠ•å–‚è›‡...");
  
  // å…ˆç¡®è®¤æŠ•å–‚æŒ‰é’®çŠ¶æ€æ˜¯å¦æ­£ç¡®
  updateFeedButtonState();
  
  // å¦‚æœä¸æ»¡è¶³æŠ•å–‚æ¡ä»¶ï¼Œç›´æ¥å¼¹çª—æç¤º
  if (isFeedingSnake) {
    alert('æ­£åœ¨æŠ•å–‚ä¸­ï¼Œè¯·ç¨å...');
    return;
  }
  
  if (!canFeedSnake) {
    alert('ä»Šå¤©æ— æ³•æŠ•å–‚å°è›‡ï¼è¯·å®Œæˆä¸‰é¤å½•å…¥ä¸”ç¡®ä¿è„‚è‚ªæ‘„å…¥æœªè¾¾æ ‡ã€‚');
    return;
  }
  
  // åˆ›å»ºè„‚è‚ªå°çƒ
  console.log("åˆ›å»ºè„‚è‚ªå°çƒ...");
  const ballCount = createFatBalls();
  console.log("åˆ›å»ºçš„å°çƒæ•°é‡:", ballCount);
  
  if (ballCount === 0) {
    alert('ä»Šå¤©æ²¡æœ‰å¯ä»¥æŠ•å–‚çš„è„‚è‚ªï¼');
    return;
  }
  
  // å…¶ä½™ä»£ç ä¿æŒä¸å˜...
  
  // å‡½æ•°å…¶ä½™éƒ¨åˆ†ä¿æŒä¸å˜...  
  isFeedingSnake = true;
  snakeEating = true; // å‘Šè¯‰å°è›‡åŠ¨ç”»ç³»ç»Ÿè¿›å…¥åƒé£Ÿæ¨¡å¼
  
  // ä¿å­˜æœ€åæŠ•å–‚æ—¥æœŸ
  if (appState.meals.length > 0) {
    lastFeedDate = appState.meals[appState.meals.length - 1].date;
    hasFedSnakeToday = true;
  }
  
  // è®¾ç½®æŠ•å–‚æŒ‰é’®çŠ¶æ€
  updateFeedButtonState();
  
  // è·å–å°è›‡çš„ä½ç½®å’Œå°çƒä½ç½®
  const snakeCanvas = document.getElementById('snakePet');
  const snakeHead = snakeBody[0];
  const balls = document.querySelectorAll('.fat-ball');
  const lastBall = balls[balls.length - 1];
  
  // å°çƒåœ¨é¡µé¢ä¸­çš„ä½ç½®
  const lastBallRect = lastBall.getBoundingClientRect();
  const canvasRect = snakeCanvas.getBoundingClientRect();
  
  // è®¡ç®—ç›®æ ‡ä½ç½®ï¼ˆè½¬æ¢ä¸ºcanvasåæ ‡ç³»ï¼‰
  const targetX = lastBallRect.left + lastBallRect.width/2 - canvasRect.left - SNAKE_SIZE/2;
  const targetY = lastBallRect.top + lastBallRect.height/2 - canvasRect.top - SNAKE_SIZE/2;
  
  // å­˜å‚¨åŠ¨ç”»èµ·å§‹ä½ç½®
  const startX = snakeHead.x;
  const startY = snakeHead.y;
  
  // å°è›‡ç§»åŠ¨åˆ°çƒä½ç½®çš„åŠ¨ç”»
  let moveFrame = 0, totalMoveFrames = 40;
  
  function moveSnakeToBall() {
    moveFrame++;
    const progress = moveFrame / totalMoveFrames;
    const currentX = startX + (targetX - startX) * progress;
    const currentY = startY + (targetY - startY) * progress;
    
    // æ›´æ–°è›‡å¤´ä½ç½®
    snakeBody.unshift({ x: currentX, y: currentY });
    snakeBody.length = snakeLength;
    snakeMood = 'yum'; // å˜ä¸ºåƒé£Ÿè¡¨æƒ…
    
    // å¦‚æœåˆ°è¾¾ç›®æ ‡ä½ç½®ï¼Œå¼€å§‹åƒçƒ
    if (moveFrame >= totalMoveFrames) {
      eatFatBalls();
    } else {
      requestAnimationFrame(moveSnakeToBall);
    }
  }
  
  // åƒçƒåŠ¨ç”»
  function eatFatBalls() {
    let currentBallIndex = balls.length - 1; // ä»æœ€åä¸€ä¸ªçƒå¼€å§‹åƒ
    
    function eatNextBall() {
      if (currentBallIndex < 0) {
        // æ‰€æœ‰çƒéƒ½åƒå®Œäº†ï¼Œè·³èˆåº†ç¥
        celebrateAfterEating();
        return;
      }
      
      // åƒå½“å‰çƒ
      const currentBall = balls[currentBallIndex];
      currentBall.style.transform = 'scale(0)';
      currentBall.style.transition = 'transform 0.5s';
      
      // å¢åŠ è›‡èº«é•¿åº¦
      snakeLength++;
      localStorage.setItem('snakeLength', snakeLength);
      
      // æ·»åŠ æ–°çš„è›‡èº«ä½“èŠ‚
      const lastBodyPart = snakeBody[snakeBody.length - 1];
      snakeBody.push({ ...lastBodyPart });
      
      // ç¨ç­‰ç‰‡åˆ»åƒä¸‹ä¸€ä¸ªçƒ
      setTimeout(() => {
        currentBallIndex--;
        eatNextBall();
      }, 600);
    }
    
    // å¼€å§‹åƒçƒ
    eatNextBall();
  }
  
  // åƒå®Œååº†ç¥
  function celebrateAfterEating() {
    // éšè—å°çƒå®¹å™¨
    document.getElementById('fatBallsContainer').style.display = 'none';
    
    // æ˜¾ç¤ºçˆ±å¿ƒå¹¶è·³èˆ
    snakeMood = 'smile';
    
    // åˆ›å»ºçˆ±å¿ƒåŠ¨ç”»
    const heart = document.createElement('div');
    heart.innerHTML = 'â¤ï¸';
    heart.style.position = 'absolute';
    heart.style.left = `${canvasRect.left + snakeBody[0].x + SNAKE_SIZE/2}px`;
    heart.style.top = `${canvasRect.top + snakeBody[0].y - 20}px`;
    heart.style.fontSize = '24px';
    heart.style.animation = 'float-up 2s ease-out';
    heart.style.zIndex = '1003';
    document.body.appendChild(heart);
    
    // æ·»åŠ åŠ¨ç”»æ ·å¼
    const style = document.createElement('style');
    style.textContent = `
      @keyframes float-up {
        0% { transform: translateY(0) scale(1); opacity: 1; }
        100% { transform: translateY(-50px) scale(1.5); opacity: 0; }
      }
    `;
    document.head.appendChild(style);
    
    // è·³èˆåŠ¨ç”»
    let danceFrame = 0;
    const danceTotal = 30;
    const danceAmplitude = 10;
    
    function snakeDance() {
      danceFrame++;
      const offset = Math.sin(danceFrame * 0.5) * danceAmplitude;
      
      // è›‡å¤´å·¦å³æ‘†åŠ¨
      const head = snakeBody[0];
      snakeBody[0] = { x: head.x + offset, y: head.y };
      
      if (danceFrame < danceTotal) {
        requestAnimationFrame(snakeDance);
      } else {
        // ç»“æŸåŠ¨ç”»ï¼Œæ¢å¤å°è›‡æ­£å¸¸çŠ¶æ€
        setTimeout(() => {
          snakeMood = 'normal';
          snakeEating = false;
          isFeedingSnake = false;
          
          // æ¸…ç†çˆ±å¿ƒå…ƒç´ 
          setTimeout(() => {
            document.body.removeChild(heart);
          }, 1000);
        }, 1000);
      }
    }
    
    // å¼€å§‹è·³èˆ
    snakeDance();
  }
  
  // å¼€å§‹æŠ•å–‚åŠ¨ç”»
  moveSnakeToBall();
}

// ========== éšæœºé¥®é£Ÿæ•°æ®ç”ŸæˆåŠŸèƒ½ ==========

// ã€é…ç½®ã€‘å¯æ ¹æ®ä½ æ•°æ®åº“å¢åˆ çƒ¹é¥ªæ–¹å¼ä¸å•ä½
const foodOptions = [
  { name: "é¸¡è›‹", unit: "ä¸ª", cooks: ["ç…®", "ç‚’", "è’¸"] },
  { name: "ç±³é¥­", unit: "g", cooks: ["è’¸"] },
  { name: "è‹¹æœ", unit: "ä¸ª", cooks: ["ç”Ÿåƒ"] },
  { name: "ç‰›è‚‰", unit: "g", cooks: ["ç‚’", "ç…®", "çº¢çƒ§"] },
  { name: "åœŸè±†", unit: "g", cooks: ["è’¸", "ç‚’"] },
  { name: "è¥¿å…°èŠ±", unit: "g", cooks: ["ç‚’", "è’¸"] },
  { name: "é¸¡èƒ¸è‚‰", unit: "g", cooks: ["ç…®", "ç‚’"] }
  // ...æŒ‰éœ€è¡¥å…¨
];

// æ—©ä¸­æ™šé¤æ—¶é—´æ®µ
const mealTimeRanges = [
  { name: "æ—©é¤", min: 700, max: 930 },
  { name: "åˆé¤", min: 1150, max: 1250 },   // æ›´é›†ä¸­
  { name: "æ™šé¤", min: 1730, max: 2030 }
];

function randomInt(min, max) {
  return Math.floor(Math.random() * (max - min + 1)) + min;
}
function getLastMeal() {
  if (!appState.meals || appState.meals.length === 0) return null;
  return appState.meals[appState.meals.length - 1];
}
function getMealsCountOnDate(date) {
  return appState.meals ? appState.meals.filter(m => m.date === date).length : 0;
}
function getNextDate(dateStr) {
  const y = Number(dateStr.slice(0, 4)), m = Number(dateStr.slice(4, 6)), d = Number(dateStr.slice(6, 8));
  const date = new Date(y, m - 1, d + 1);
  const mm = (date.getMonth() + 1).toString().padStart(2, "0");
  const dd = date.getDate().toString().padStart(2, "0");
  return `${date.getFullYear()}${mm}${dd}`;
}
function randomMealTime(mealIdx) {
  const mt = mealTimeRanges[mealIdx];
  // éšæœºå°æ—¶å’Œåˆ†é’Ÿï¼Œåˆ†é’Ÿåªåœ¨ 0-59
  const minHour = Math.floor(mt.min / 100);
  const maxHour = Math.floor(mt.max / 100);
  let hour = randomInt(minHour, maxHour);

  // å®šä¹‰å¯¹åº”å°æ—¶çš„å…è®¸åˆ†é’ŸåŒºé—´
  let minMin = 0, maxMin = 59;
  if (hour === minHour) minMin = mt.min % 100;
  if (hour === maxHour) maxMin = mt.max % 100;

  let min = randomInt(minMin, maxMin);

  return `${hour.toString().padStart(2,"0")}${min.toString().padStart(2,"0")}`;
}
function randomMealContent() {
  let n = randomInt(3, 5);
  let items = [];
  let usedIdx = new Set();
  while (items.length < n) {
    let idx = randomInt(0, foodOptions.length - 1);
    if (usedIdx.has(idx)) continue;
    usedIdx.add(idx);
    const food = foodOptions[idx];
    const cook = food.cooks[randomInt(0, food.cooks.length - 1)];
    const amount = food.unit === "ä¸ª" ? randomInt(1, 3) : randomInt(60, 250);
    items.push(`${cook}${food.name}${amount}${food.unit}`);
  }
  return items.join("ï¼Œ");
}
function randomDuration() {
  return randomInt(15, 50);
}
function generateRandomMealInput() {
 const lastMeal = getLastMeal();
let date, mealIdx, mealNumber, time, duration;

// å½“å‰æ—¥æœŸ
let today;
if (!lastMeal) {
    // é¦–é¤ï¼Œä»Šå¤©æ—©é¤
    const now = new Date();
    date = now.getFullYear().toString() + (now.getMonth()+1).toString().padStart(2,"0") + now.getDate().toString().padStart(2,"0");
    mealIdx = 0; // æ—©é¤
    mealNumber = 1;
} else {
    // åˆ¤æ–­æœ€åä¸€é¤çš„æ—¥æœŸ
    date = lastMeal.date;
    const mealsToday = appState.meals.filter(m => m.date === date);
    mealNumber = mealsToday.length + 1;
    mealIdx = mealsToday.length; // 0=æ—©é¤ï¼Œ1=åˆé¤ï¼Œ2=æ™šé¤
    if (mealNumber > 3) {
        // ä¸‰é¤æ»¡äº†ï¼Œè½¬å…¥ä¸‹ä¸€å¤©çš„æ—©é¤
        date = getNextDate(date);
        mealNumber = 1;
        mealIdx = 0;
    }
}
time = randomMealTime(mealIdx);
duration = randomDuration();

const content = randomMealContent();
return `${date}-${time}-${duration}-${content}`;
}

// æŒ‰é’®äº‹ä»¶ç»‘å®š

// ========== é¤é£Ÿåé¦ˆï¼ˆåŒ…å«çƒ¹é¥ªæ–¹å¼ä¸å»ºè®®ï¼‰ ==========
function generateMealFeedback(meal) {
    addMessage('ai', ''); // ä»€ä¹ˆä¹Ÿä¸æ˜¾ç¤º
}

// ========== è¿›åº¦æ¡ã€å¥åº·è¯„åˆ†ã€å‡†ç¡®ç‡UI ==========
function updateProgressBars() {
    const plan = appState.plan;
    const curr = appState.dailyNutrition;
    function updateBar(id, value, max) {
        const bar = document.getElementById(id);
        if (!bar) return;
        const percent = Math.min(100, Math.round((value / max) * 100));
        bar.style.width = percent + '%';
        if (percent > 100) {
            bar.classList.add('progress-overflow');
        } else {
            bar.classList.remove('progress-overflow');
        }
    }
    updateBar('progressCalories', curr.calories, plan.targetCalories);
    updateBar('progressProtein', curr.protein, plan.targetProtein);
    updateBar('progressCarbs', curr.carbs, plan.targetCarbs);
    updateBar('progressFat', curr.fat, plan.targetFat);
    updateBar('progressFiber', curr.fiber, plan.targetFiber);

    // ä¿®æ”¹è¿™éƒ¨åˆ†ï¼Œç¡®ä¿æ‰€æœ‰æ•°å€¼æ˜¾ç¤ºåªä¿ç•™ä¸¤ä½å°æ•°
    document.getElementById('progressCaloriesValue').textContent = `${curr.calories.toFixed(0)} / ${plan.targetCalories} kcal`;
    document.getElementById('progressProteinValue').textContent = `${curr.protein.toFixed(1)} / ${plan.targetProtein} g`;
    document.getElementById('progressCarbsValue').textContent = `${curr.carbs.toFixed(1)} / ${plan.targetCarbs} g`;
    document.getElementById('progressFatValue').textContent = `${curr.fat.toFixed(1)} / ${plan.targetFat} g`;
    document.getElementById('progressFiberValue').textContent = `${curr.fiber.toFixed(1)} / ${plan.targetFiber} g`;
}

// ========== æ•°æ®é¡µè¿›åº¦æ¡ã€å¥åº·åˆ†æ˜¾ç¤º ==========
// ï¼ˆæ–°ä»£ç ï¼Œç›´æ¥æ’å…¥å³å¯ï¼‰
function updateDataProgressBars() {
    const plan = appState.plan;
    const curr = appState.dailyNutrition;
    function updateBar(id, value, max) {
        const bar = document.getElementById(id);
        if (!bar) return;
        const percent = Math.min(100, Math.round((value / max) * 100));
        bar.style.width = percent + '%';
        if (percent > 100) {
            bar.classList.add('progress-overflow');
        } else {
            bar.classList.remove('progress-overflow');
        }
    }
    updateBar('data-progressCalories', curr.calories, plan.targetCalories);
    updateBar('data-progressProtein', curr.protein, plan.targetProtein);
    updateBar('data-progressCarbs', curr.carbs, plan.targetCarbs);
    updateBar('data-progressFat', curr.fat, plan.targetFat);
    updateBar('data-progressFiber', curr.fiber, plan.targetFiber);

    // ä¿®æ”¹è¿™éƒ¨åˆ†ï¼Œç¡®ä¿æ‰€æœ‰æ•°å€¼æ˜¾ç¤ºåªä¿ç•™ä¸¤ä½å°æ•°
    document.getElementById('data-progressCaloriesValue').textContent = `${curr.calories.toFixed(0)} / ${plan.targetCalories} kcal`;
    document.getElementById('data-progressProteinValue').textContent = `${curr.protein.toFixed(1)} / ${plan.targetProtein} g`;
    document.getElementById('data-progressCarbsValue').textContent = `${curr.carbs.toFixed(1)} / ${plan.targetCarbs} g`;
    document.getElementById('data-progressFatValue').textContent = `${curr.fat.toFixed(1)} / ${plan.targetFat} g`;
    document.getElementById('data-progressFiberValue').textContent = `${curr.fiber.toFixed(1)} / ${plan.targetFiber} g`;
}
// ========== å¥åº·è¯„åˆ†è®¡ç®— ==========
function calculateNutritionDensity(nutrition) {
    if (nutrition.calories <= 0) return 0;
    // 1. åŸºç¡€è¥å…»ç´ å¯†åº¦ (40%)
    const proteinDensity = (nutrition.protein * 4) / nutrition.calories;
    const fiberDensity = (nutrition.fiber * 2) / nutrition.calories;
    const basicDensityScore = Math.min(40, (proteinDensity + fiberDensity) * 100);
    // 2. å¾®é‡å…ƒç´ å¤šæ ·æ€§è¯„åˆ† (30%)
    const micronutrientScore = Math.min(30, nutrition.micronutrientCount * 2.5);
    // 3. ç»´ç”Ÿç´ å¯†åº¦è¯„åˆ† (20%)
    const vitaminTotal = nutrition.vitaminA/100 + nutrition.vitaminC/10 + nutrition.vitaminE/5 +
        nutrition.vitaminB1*100 + nutrition.vitaminB2*50 + nutrition.vitaminB6*25 + nutrition.folate/10;
    const vitaminDensity = Math.min(20, (vitaminTotal / nutrition.calories) * 1000);
    // 4. çŸ¿ç‰©è´¨å¯†åº¦è¯„åˆ† (10%)
    const mineralTotal = nutrition.calcium/100 + nutrition.iron*10 + nutrition.magnesium/10 +
        nutrition.phosphorus/100 + nutrition.potassium/100 + nutrition.zinc*5;
    const mineralDensity = Math.min(10, (mineralTotal / nutrition.calories) * 100);
    const totalDensityScore = basicDensityScore + micronutrientScore + vitaminDensity + mineralDensity;
    addLogEntry(`V4.4è¥å…»å¯†åº¦è®¡ç®—å®Œæˆ: åŸºç¡€${basicDensityScore.toFixed(1)}/40 + å¤šæ ·æ€§${micronutrientScore.toFixed(1)}/30 + ç»´ç”Ÿç´ ${vitaminDensity.toFixed(1)}/20 + çŸ¿ç‰©è´¨${mineralDensity.toFixed(1)}/10 = ${totalDensityScore.toFixed(1)}/100`, 'calculation');
    return Math.round(totalDensityScore * 10) / 10;
}

// ä¿®æ”¹ updateDailyHealthScore å‡½æ•°
function updateDailyHealthScore() {
    const current = appState.dailyNutrition;
    const target = appState.plan;
    // æ£€æŸ¥æ˜¯å¦ä¸ºåŒä¸€å¤©çš„ç¬¬ä¸‰é¤
    let todayMeals = [];
    if (appState.meals.length > 0) {
        const lastMealDate = appState.meals[appState.meals.length - 1].date;
        todayMeals = appState.meals.filter(m => m.date === lastMealDate);
    }
    
    // æ›´æ–°å¥åº·åˆ†åŒºåŸŸçš„æ˜¾ç¤ºçŠ¶æ€
    document.getElementById('dailyHealthScore').style.display = 'block';
    
    // å¦‚æœä»Šå¤©çš„é¤æ•°å°‘äº3ï¼Œæ˜¾ç¤º"å¥åº·åˆ†è®¡ç®—ä¸­"å¹¶è¿”å›
    if (todayMeals.length < 3) {
        document.getElementById('healthScoreValue').textContent = "è®¡ç®—ä¸­";
        document.getElementById('healthScoreBreakdown').innerHTML = "å®Œæˆå½“æ—¥ä¸‰é¤è®°å½•åæ˜¾ç¤ºè¯¦ç»†è¯„åˆ†";
        return;
    }
    
    // ä»¥ä¸‹æ˜¯åŸæœ‰çš„å¥åº·åˆ†è®¡ç®—é€»è¾‘
    let totalScore = 0;
    // 1. åŸºç¡€è¥å…»æ‘„å…¥è¾¾æˆç‡ (25%)
    let nutritionScore = 0;
    const nutrients = [
        { current: current.calories, target: target.targetCalories },
        { current: current.protein, target: target.targetProtein },
        { current: current.carbs, target: target.targetCarbs },
        { current: current.fat, target: target.targetFat },
        { current: current.fiber, target: target.targetFiber }
    ];
    nutrients.forEach(nutrient => {
        const ratio = nutrient.current / nutrient.target;
        let score = 0;
        if (ratio >= 0.85 && ratio <= 1.15) score = 5;
        else if (ratio >= 0.7 && ratio <= 1.3) score = 4;
        else if (ratio >= 0.5 && ratio <= 1.5) score = 2;
        else score = 1;
        nutritionScore += score;
    });
    totalScore += nutritionScore;
    // 2. è¥å…»å¯†åº¦è¯„åˆ† (25%)
    let densityScore = 0;
    todayMeals.forEach(meal => {
        densityScore += calculateNutritionDensity(meal.nutrition);
    });
    densityScore = Math.min(25, densityScore / todayMeals.length * 0.25);
    totalScore += densityScore;
    // 3. é£Ÿç‰©åŠ å·¥ç¨‹åº¦è¯„åˆ† (15%)
    const avgProcessing = todayMeals.reduce((sum, meal) => sum + meal.nutrition.processing, 0) / todayMeals.length;
    const processingScore = Math.max(0, 15 - Math.round(avgProcessing * 3));
    totalScore += processingScore;
    // 4. è¿›é¤æ—¶é—´åŠçª—å£è¯„åˆ† (15%)
    let rhythmScore = 0;
    if (todayMeals.length >= 2) {
        const avgDuration = todayMeals.reduce((sum, meal) => sum + meal.duration, 0) / todayMeals.length;
        if (avgDuration >= 20 && avgDuration <= 40) rhythmScore += 7.5;
        else if (avgDuration >= 15 && avgDuration <= 50) rhythmScore += 5;
        else rhythmScore += 2;
        // ç”¨é¤åˆ†å¸ƒ
        rhythmScore += Math.min(7.5, todayMeals.length * 2.5);
    } else {
        rhythmScore += 3;
    }
    totalScore += rhythmScore;
    // 5. USDAæ•°æ®åŒ¹é…ç‡è¯„åˆ† (20%)
    const usdaMatchRate = appState.nutritionAccuracyStats.total > 0 ?
        (appState.nutritionAccuracyStats.usda_matched / appState.nutritionAccuracyStats.total) : 0;
    totalScore += Math.round(usdaMatchRate * 20);

    // æœ€ç»ˆå¾—åˆ†é™åˆ¶
    totalScore = Math.min(100, Math.round(totalScore));
    
    // ä¿å­˜æ¯æ—¥å¥åº·åˆ†ï¼Œç”¨äºæ•°æ®é¡µé¢çš„æ£€ç´¢å±•ç¤º
    const lastMealDate = todayMeals[0].date;
    if (!appState.dailyScores) appState.dailyScores = {};
    appState.dailyScores[lastMealDate] = totalScore;
    
    // æ›´æ–°UI
    document.getElementById('healthScoreValue').textContent = totalScore;
    document.getElementById('healthScoreBreakdown').innerHTML =
        `åŸºç¡€è¾¾æˆç‡: ${nutritionScore}/25 | è¥å…»å¯†åº¦: ${densityScore.toFixed(1)}/25 | åŠ å·¥: ${processingScore}/15 | è¿›é¤èŠ‚å¾‹: ${rhythmScore.toFixed(1)}/15 | USDAåŒ¹é…: ${(usdaMatchRate*100).toFixed(1)}%`;
}

// ========== æ•°æ®è¶‹åŠ¿ç­‰åŠŸèƒ½ï¼ˆç®€å•æŠ˜çº¿å›¾/æ¨¡æ‹Ÿï¼‰ ==========
function updateDataPageCharts() {
    // è¿™é‡Œå¯å¯¹æ¥Chart.jsæˆ–è‡ªå®šä¹‰canvasä½œæŠ˜çº¿å›¾
    // ç®€å•æ˜¾ç¤ºç´¯è®¡å¥åº·è¯„åˆ†è¶‹åŠ¿
    // å¯æ‰©å±•
}

// ========== é‡ç½®åŠŸèƒ½ ==========
function resetApp() {
    if (!confirm('ç¡®å®šè¦é‡ç½®æ‰€æœ‰æ•°æ®å—ï¼Ÿ')) return;
    location.reload();
}
// ===== æ•°æ®é¡µå››å¤§æŒ‰é’®åˆ‡æ¢åŠŸèƒ½ =====

let currentDataTab = 'overview';

// åˆ‡æ¢é€‰ä¸­æ€
function setTabSelected(tab) {
  ['btnOverview', 'btnSearch', 'btnScore', 'btnTrend'].forEach(id => {
    document.getElementById(id).classList.remove('selected');
  });
  document.getElementById('btn' + tab.charAt(0).toUpperCase() + tab.slice(1)).classList.add('selected');
}

// æ˜¾ç¤ºâ€œæ€»è§ˆâ€
function showOverviewTab() {
  setTabSelected('overview');
  currentDataTab = 'overview';

  // å…ˆå±•ç¤ºä¸“å±è¥å…»è®¡åˆ’
  let html = `<div style="font-size:1.09rem;font-weight:700;margin-bottom:10px;">ä¸“å±è¥å…»è®¡åˆ’</div>`;
  if (appState.plan && appState.plan.targetCalories) {
    const goalText =
      appState.userInfo.goal === 'gain' ? 'ğŸ’ª å¢è‚Œå¡‘å½¢' :
      appState.userInfo.goal === 'lose' ? 'ğŸ”¥ å‡è„‚ç˜¦èº«' :
      'âš–ï¸ å¹³è¡¡è¥å…»';
    html += `
      <div style="line-height:2;margin-bottom:12px;">
      ğŸ¯ ç›®æ ‡ï¼š${goalText}<br>
      ğŸ”¥ æ¯æ—¥å¡è·¯é‡Œï¼š${appState.plan.targetCalories}kcal<br>
      ğŸ’ª æ¯æ—¥è›‹ç™½è´¨ï¼š${appState.plan.targetProtein}g<br>
      ğŸ æ¯æ—¥ç¢³æ°´åŒ–åˆç‰©ï¼š${appState.plan.targetCarbs}g<br>
      ğŸ¥‘ æ¯æ—¥è„‚è‚ªï¼š${appState.plan.targetFat}g<br>
      ğŸŒ¾ æ¯æ—¥è†³é£Ÿçº¤ç»´ï¼š${appState.plan.targetFiber}g<br>
      </div>
    `;
  } else {
    html += `<div style="color:#999;">æš‚æœªç”Ÿæˆä¸“å±è®¡åˆ’ï¼Œè¯·å…ˆåœ¨ä¸»é¡µå½•å…¥ä¿¡æ¯ã€‚</div>`;
  }

  // å†è¿½åŠ å…¨éƒ¨é¤é£Ÿæ•°æ®è®°å½•
  html += `<div style="font-size:1.04rem;font-weight:700;margin:18px 0 8px 0;">ä¿¡æ¯äº¤äº’æ€»è§ˆè®°å½•</div>`;
  if (!appState.meals || appState.meals.length === 0) {
    html += `<div style="color:#999;">æš‚æ— ä»»ä½•æ•°æ®ï¼Œè¯·å…ˆåœ¨ä¸»é¡µå½•å…¥é¥®é£Ÿä¿¡æ¯ã€‚</div>`;
  } else {
    html += appState.meals.map((meal, idx) => `
      <div style="margin-bottom:16px;padding:10px 0;border-bottom:1.5px dashed #c1eab8;">
        <div>ç¬¬${meal.mealNumber}é¤ | æ—¥æœŸï¼š${meal.date} ${meal.time} | ç”¨æ—¶ï¼š${meal.duration}åˆ†é’Ÿ</div>
        <div>å†…å®¹ï¼š${meal.mealContent}</div>
        <div>çƒ­é‡ï¼š${meal.nutrition.calories}kcalï¼›è›‹ç™½è´¨ï¼š${meal.nutrition.protein}gï¼›ç¢³æ°´ï¼š${meal.nutrition.carbs}gï¼›è„‚è‚ªï¼š${meal.nutrition.fat}gï¼›çº¤ç»´ï¼š${meal.nutrition.fiber}g</div>
      </div>
    `).join('');
  }
  document.getElementById('dataScreenBox').innerHTML = html;
}

// æ˜¾ç¤ºâ€œæ£€ç´¢â€
// ä¿®æ”¹ showSearchTab å‡½æ•°ä¸­çš„æ£€ç´¢ç»“æœå¤„ç†éƒ¨åˆ†
function showSearchTab() {
  setTabSelected('search');
  currentDataTab = 'search';
  // è·å–æ‰€æœ‰å·²å½•å…¥çš„å”¯ä¸€æ—¥æœŸ
  const uniqueDates = [...new Set(appState.meals.map(meal => meal.date))];
  let html = `<div style="margin-bottom:18px;">
    <label style="font-size:1rem;">é€‰æ‹©æ—¥æœŸï¼š</label>
    <select id="searchDateSelect" style="font-size:1rem;padding:4px 12px;">
      <option value="">è¯·é€‰æ‹©æ—¥æœŸ</option>
      ${uniqueDates.map(d => `<option value="${d}">${d}</option>`).join('')}
    </select>
  </div>
  <div id="searchResult"></div>`;
  document.getElementById('dataScreenBox').innerHTML = html;
  document.getElementById('searchDateSelect').onchange = function() {
    const date = this.value;
    if (!date) {
      document.getElementById('searchResult').innerHTML = '';
      return;
    }
    // æ‰¾å‡ºè¿™å¤©çš„æ‰€æœ‰é¤
    const meals = appState.meals.filter(meal => meal.date === date);
    if (meals.length === 0) {
      document.getElementById('searchResult').innerHTML = `<div style="color:#888;">è¯¥æ—¥æ²¡æœ‰é¥®é£Ÿè®°å½•ã€‚</div>`;
      return;
    }
    
    // è·å–å½“å¤©çœŸå®çš„å¥åº·åˆ†
    let dayScore = 'æœªè®¡ç®—';
    if (meals.length >= 3) {
      // ä»ä¿å­˜çš„å¥åº·åˆ†æ•°æ®ä¸­è·å–
      if (appState.dailyScores && appState.dailyScores[date]) {
        dayScore = appState.dailyScores[date];
      } else {
        // å¦‚æœæ²¡æœ‰ä¿å­˜çš„å¥åº·åˆ†ï¼Œé‡æ–°è®¡ç®—
        let dailyNutrition = {calories:0, protein:0, carbs:0, fat:0, fiber:0};
        meals.forEach(m => {
          dailyNutrition.calories += m.nutrition.calories;
          dailyNutrition.protein += m.nutrition.protein;
          dailyNutrition.carbs += m.nutrition.carbs;
          dailyNutrition.fat += m.nutrition.fat;
          dailyNutrition.fiber += m.nutrition.fiber;
        });
        
        // ç®€åŒ–ç‰ˆçš„å¥åº·åˆ†è®¡ç®—
        const plan = appState.plan;
        let score = 0;
        
        // è®¡ç®—åŸºç¡€è¥å…»è¾¾æˆç‡
        const nutrients = [
          { current: dailyNutrition.calories, target: plan.targetCalories },
          { current: dailyNutrition.protein, target: plan.targetProtein },
          { current: dailyNutrition.carbs, target: plan.targetCarbs },
          { current: dailyNutrition.fat, target: plan.targetFat },
          { current: dailyNutrition.fiber, target: plan.targetFiber }
        ];
        let nutritionScore = 0;
        nutrients.forEach(nutrient => {
          const ratio = nutrient.current / nutrient.target;
          if (ratio >= 0.85 && ratio <= 1.15) nutritionScore += 5;
          else if (ratio >= 0.7 && ratio <= 1.3) nutritionScore += 4;
          else if (ratio >= 0.5 && ratio <= 1.5) nutritionScore += 2;
          else nutritionScore += 1;
        });
        score += nutritionScore;
        
        // ç®€åŒ–è®¡ç®—ï¼ŒåŠ ä¸Šé»˜è®¤åˆ†æ•°
        score += 40; // é»˜è®¤åŠ 40åˆ†ä½œä¸ºå…¶ä»–é¡¹çš„ç®€åŒ–è®¡ç®—
        
        // æœ€ç»ˆå¾—åˆ†é™åˆ¶
        dayScore = Math.min(100, Math.round(score));
      }
    }
    
    document.getElementById('searchResult').innerHTML = `
      <div style="margin-bottom:9px;font-weight:700;">${date} é¥®é£Ÿä¸å¥åº·åˆ†</div>
      ${meals.map((meal,idx)=>`
        <div style="margin-bottom:8px;padding:7px 0;border-bottom:1px dotted #a6d08c;">
          <div>ç¬¬${meal.mealNumber}é¤ | æ—¶é—´ï¼š${meal.time} | ç”¨æ—¶ï¼š${meal.duration}åˆ†é’Ÿ</div>
          <div>é£Ÿç‰©ï¼š${meal.mealContent}</div>
          <div>çƒ­é‡ï¼š${meal.nutrition.calories}kcalï¼Œè›‹ç™½è´¨ï¼š${meal.nutrition.protein}gï¼Œç¢³æ°´ï¼š${meal.nutrition.carbs}gï¼Œè„‚è‚ªï¼š${meal.nutrition.fat}gï¼Œçº¤ç»´ï¼š${meal.nutrition.fiber}g</div>
        </div>
      `).join('')}
      <div style="font-weight:700;color:#397d1c;margin-top:12px;">å½“æ—¥å¥åº·åˆ†ï¼š${meals.length >= 3 ? dayScore : 'æœªæ»¡ä¸‰é¤ï¼Œæ— æ³•è®¡ç®—'}</div>
    `;
  };
}

// æ˜¾ç¤ºâ€œåˆ†æ•°â€
function showScoreTab() {
  setTabSelected('score');
  currentDataTab = 'score';
  // ç”¨canvasç»˜åˆ¶ç®€å•æŠ˜çº¿å›¾ï¼Œæ¨ªè½´ä¸ºæ—¥æœŸï¼Œçºµè½´ä¸ºåˆ†æ•°ï¼ˆä½ å¯æŒ‰ appState.dailyScores æˆ–æ¯æ—¥æ—¥å‡åˆ†ç”Ÿæˆï¼‰
  let html = `<canvas id="scoreChart" width="720" height="200" style="max-width:100%;margin-top:18px;background:rgba(150,220,220,0.13);border-radius:8px;"></canvas>`;
  document.getElementById('dataScreenBox').innerHTML = html;
  // æ¨¡æ‹Ÿæ¯æ—¥å¥åº·åˆ†
  const dates = [...new Set(appState.meals.map(meal => meal.date))];
  if (dates.length === 0) return;
  // ç”Ÿæˆåˆ†æ•°å‡æ•°æ®
  const scoreArr = dates.map(d => {
    const meals = appState.meals.filter(meal => meal.date === d);
    return { date: d, score: meals.length >= 3 ? 80 + Math.floor(Math.random()*10) : 40 + Math.floor(Math.random()*20)};
  });
  drawScoreChart(scoreArr);
}

// ç»˜åˆ¶åˆ†æ•°æŠ˜çº¿å›¾
function drawScoreChart(data) {
  const canvas = document.getElementById('scoreChart');
  if (!canvas || data.length === 0) return;
  const ctx = canvas.getContext('2d');
  ctx.clearRect(0,0,canvas.width,canvas.height);
  // åæ ‡
  const margin = 36, chartW = canvas.width - 2*margin, chartH = canvas.height - 2*margin;
  // æ¨ªåæ ‡
  const n = data.length;
  // åˆ†æ•°æŠ˜çº¿åŠ ç²—åŠ è‰²
ctx.save();
ctx.shadowColor = "#bfc8b4";
ctx.shadowBlur = 8;
ctx.lineWidth = 4;
ctx.strokeStyle = "#40a4e0";  // ä¸»è‰²
ctx.beginPath();
for(let i=0;i<n;i++){
    const x = margin + (chartW)*(i/(n-1));
    const y = margin + chartH*(1-(data[i].score-20)/80);
    if(i===0)ctx.moveTo(x,y);
    else ctx.lineTo(x,y);
}
ctx.stroke();
ctx.restore();
  ctx.beginPath();
  for(let i=0;i<n;i++){
    const x = margin + (chartW)*(i/(n-1));
    const y = margin + chartH*(1-(data[i].score-20)/80);
    if(i===0)ctx.moveTo(x,y);
    else ctx.lineTo(x,y);
  }
  ctx.stroke();
  // åœ†ç‚¹ä¸æ—¥æœŸ
  ctx.fillStyle='#397d1c'; ctx.font='15px Segoe UI';
  for(let i=0;i<n;i++){
    const x = margin + (chartW)*(i/(n-1));
    const y = margin + chartH*(1-(data[i].score-20)/80);
    ctx.beginPath();ctx.arc(x,y,4,0,2*Math.PI);ctx.fill();
    ctx.save();ctx.translate(x,y+19);ctx.rotate(-0.13);
    ctx.fillText(data[i].date.slice(4),-18,0);
    ctx.restore();
  }
  // çºµåæ ‡åˆ»åº¦
  ctx.fillStyle='#999'; ctx.font='12px Segoe UI';
  for(let i=0;i<=5;i++){
    const y = margin + chartH*(1-i/5);
    ctx.fillText(String(20+16*i),8,y+4);
    ctx.beginPath();ctx.moveTo(margin-6,y);ctx.lineTo(margin,y);ctx.strokeStyle='#b39a69';ctx.stroke();
  }
}

// æ˜¾ç¤ºâ€œè¶‹åŠ¿â€
function showTrendTab() {
  setTabSelected('trend');
  currentDataTab = 'trend';
  // æ¨ªè½´ä¸ºæ—¥æœŸï¼Œçºµè½´å¯åˆ‡æ¢çƒ­é‡/è›‹ç™½è´¨/è„‚è‚ª/ç¢³æ°´/çº¤ç»´
  let html = `
    <div style="margin-bottom:14px;">
      <label style="margin-right:8px;">æ•°æ®ç±»å‹ï¼š</label>
      <select id="trendType" style="font-size:1rem;padding:4px 12px;">
        <option value="calories">çƒ­é‡</option>
        <option value="protein">è›‹ç™½è´¨</option>
        <option value="fat">è„‚è‚ª</option>
        <option value="carbs">ç¢³æ°´</option>
        <option value="fiber">è†³é£Ÿçº¤ç»´</option>
      </select>
    </div>
    <canvas id="trendChart" width="720" height="200" style="max-width:100%;background:rgba(150,220,220,0.11);border-radius:8px;"></canvas>
  `;
  document.getElementById('dataScreenBox').innerHTML = html;
  // åˆæ¬¡åŠ è½½
  renderTrendChart('calories');
  document.getElementById('trendType').onchange = function() {
    renderTrendChart(this.value);
  };
}

function renderTrendChart(type) {
  const canvas = document.getElementById('trendChart');
  if (!canvas) return;
  const ctx = canvas.getContext('2d');
  ctx.clearRect(0,0,canvas.width,canvas.height);
  // è·å–æ‰€æœ‰æ—¥æœŸ
  const dates = [...new Set(appState.meals.map(meal => meal.date))];
  if (dates.length === 0) return;
  // ç»Ÿè®¡æ¯æ—¥æ‘„å…¥
  const valueMap = {};
  dates.forEach(d => { valueMap[d] = 0; });
  appState.meals.forEach(meal => {
    valueMap[meal.date] += meal.nutrition[type] || 0;
  });
  // ç»˜åˆ¶æŠ˜çº¿
  const margin = 36, chartW = canvas.width - 2*margin, chartH = canvas.height - 2*margin;
  ctx.strokeStyle = '#457cba'; ctx.beginPath();
  dates.forEach((d,i)=>{
    const v = valueMap[d];
    const x = margin + (chartW)*(i/(dates.length-1));
    // å½’ä¸€åŒ–åˆ°æœ€å¤§å€¼ï¼ˆè§†è§‰ç¾è§‚å¯åšä¸‹é™é™åˆ¶ï¼‰
    let maxVal = Math.max(...Object.values(valueMap));
    maxVal = Math.max(maxVal, 10);
    const y = margin + chartH*(1-v/maxVal);
    if(i===0)ctx.moveTo(x,y);else ctx.lineTo(x,y);
  });
const colorMap = {
  calories: "#e27c19",
  protein: "#25ae66",
  fat: "#b67f22",
  carbs: "#a1a900",
  fiber: "#4061e0"
};
ctx.save();
ctx.shadowColor = "#bfc8b4";
ctx.shadowBlur = 8;
ctx.lineWidth = 4;
ctx.strokeStyle = colorMap[type] || "#457cba";
ctx.beginPath();
dates.forEach((d,i)=>{
    const v = valueMap[d];
    const x = margin + (chartW)*(i/(dates.length-1));
    let maxVal = Math.max(...Object.values(valueMap));
    maxVal = Math.max(maxVal, 10);
    const y = margin + chartH*(1-v/maxVal);
    if(i===0)ctx.moveTo(x,y);else ctx.lineTo(x,y);
});
ctx.stroke();
ctx.restore();
  ctx.stroke();
  // åœ†ç‚¹ä¸æ—¥æœŸ
  ctx.fillStyle='#397d1c'; ctx.font='15px Segoe UI';
  dates.forEach((d,i)=>{
    const v = valueMap[d];
    const x = margin + (chartW)*(i/(dates.length-1));
    let maxVal = Math.max(...Object.values(valueMap));
    maxVal = Math.max(maxVal, 10);
    const y = margin + chartH*(1-v/maxVal);
    ctx.beginPath();ctx.arc(x,y,4,0,2*Math.PI);ctx.fill();
    ctx.save();ctx.translate(x,y+19);ctx.rotate(-0.13);
    ctx.fillText(d.slice(4),-18,0);
    ctx.restore();
  });
  // çºµåæ ‡åˆ»åº¦
  ctx.fillStyle='#999'; ctx.font='12px Segoe UI';
  for(let i=0;i<=5;i++){
    const y = margin + chartH*(1-i/5);
    ctx.fillText(String(Math.round(Math.max(...Object.values(valueMap))*i/5)),8,y+4);
    ctx.beginPath();ctx.moveTo(margin-6,y);ctx.lineTo(margin,y);ctx.strokeStyle='#b39a69';ctx.stroke();
  }
}

// ç»‘å®šäº‹ä»¶
document.addEventListener('DOMContentLoaded', function() {
document.getElementById('btnGenPlan').onclick = submitPersonalInfo;

// æ·»åŠ æŠ•å–‚æŒ‰é’®äº‹ä»¶ç›‘å¬
const feedButton = document.getElementById('btnFeedSnake');
if (feedButton) {
  console.log("æ‰¾åˆ°æŠ•å–‚æŒ‰é’®ï¼Œæ·»åŠ ç‚¹å‡»äº‹ä»¶");
  
  // ä½¿ç”¨addEventListenerç¡®ä¿ä¸ä¼šè¦†ç›–å…¶ä»–äº‹ä»¶ç›‘å¬å™¨
  feedButton.addEventListener('click', function() {
    console.log("æŠ•å–‚æŒ‰é’®è¢«ç‚¹å‡»", canFeedSnake, isFeedingSnake);
    if (canFeedSnake && !isFeedingSnake) {
      startSnakeFeeding();
    }
  });
}

  // åˆå§‹åŒ–æŠ•å–‚æŒ‰é’®çŠ¶æ€
  updateFeedButtonState();
  // éšæœºç”Ÿæˆä¸€é¤æŒ‰é’®äº‹ä»¶ç»‘å®š
const btnRand = document.getElementById("btnRandomMeal");
if (btnRand) {
  btnRand.addEventListener('click', function() {
    const input = document.getElementById("mealInputRaw");
    if (!input) return;
    const value = generateRandomMealInput();
    input.value = value;
  });
}

  document.getElementById('btnOverview').onclick = showOverviewTab;
  document.getElementById('btnSearch').onclick = showSearchTab;
  document.getElementById('btnScore').onclick = showScoreTab;
  document.getElementById('btnTrend').onclick = showTrendTab;
  // é»˜è®¤è¿›å…¥â€œæ€»è§ˆâ€tab
  if(document.getElementById('btnOverview')) showOverviewTab();
});

// ç¡®ä¿submitMealæ­£ç¡®æ‰§è¡Œå¹¶æ›´æ–°æŒ‰é’®çŠ¶æ€
const originalSubmitMeal = submitMeal;
submitMeal = function() {
  try {
    originalSubmitMeal.apply(this, arguments);
    console.log("é¤é£Ÿæäº¤æˆåŠŸï¼Œæ›´æ–°æŒ‰é’®çŠ¶æ€");
    // æ›´æ–°æŠ•å–‚æŒ‰é’®çŠ¶æ€
    updateFeedButtonState();
  } catch (error) {
    console.error("æäº¤é¤é£Ÿæ—¶å‡ºé”™:", error);
  }
};

  // ä¿®æ”¹updateDailyHealthScoreï¼Œæ¯æ¬¡å¥åº·åˆ†æ›´æ–°æ—¶ä¹Ÿæ›´æ–°æŠ•å–‚æŒ‰é’®çŠ¶æ€
  const originalUpdateDailyHealthScore = updateDailyHealthScore;
  updateDailyHealthScore = function() {
    originalUpdateDailyHealthScore.apply(this, arguments);
    // æ›´æ–°æŠ•å–‚æŒ‰é’®çŠ¶æ€
    updateFeedButtonState();
  };
</script>
<script>
// ==== Minecraftåƒç´ é£ç”µå­å® ç‰©å°è›‡V2 ====

// é…ç½®
const SNAKE_CANVAS_W = 480;
const SNAKE_CANVAS_H = 140;
const SNAKE_SPEED = 0.7;  // å•ä½åƒç´ /å¸§
const SNAKE_SIZE = 22;    // å•èŠ‚ä½“ç§¯
const SNAKE_MARGIN = 6;   // ç¦»è¾¹ç•Œçš„æœ€å°è·ç¦»
const SNAKE_GROW_FACTOR = 2; // æ¯æ¬¡åƒæ‰å¢é•¿ä½“èŠ‚æ•°å› å­

let snakeLength = parseInt(localStorage.getItem('snakeLength') || '5');
let snakeBody = [];
let snakeEating = false;
let snakeMood = 'normal'; // normal/smile/yum
let snakeTarget = null;
let snakeTimer = 0;

// åˆå§‹åŒ–èº«ä½“
function initSnakeBody(len) {
    snakeBody = [];
    let x = SNAKE_CANVAS_W / 2, y = SNAKE_CANVAS_H / 2;
    for (let i = 0; i < len; i++) {
        snakeBody.push({ x: x - i * SNAKE_SIZE, y: y });
    }
}

// ç”»è›‡
function drawSnake(ctx) {
  ctx.clearRect(0, 0, SNAKE_CANVAS_W, SNAKE_CANVAS_H);
  // èº«ä½“
  for (let i = snakeBody.length - 1; i >= 1; i--) {
    ctx.fillStyle = '#6bbd4a';
    ctx.fillRect(snakeBody[i].x, snakeBody[i].y, SNAKE_SIZE, SNAKE_SIZE);
    ctx.strokeStyle = '#397d1c';
    ctx.strokeRect(snakeBody[i].x, snakeBody[i].y, SNAKE_SIZE, SNAKE_SIZE);
  }
  // å¤´
  const head = snakeBody[0];
  ctx.fillStyle = '#8ae068';
  ctx.fillRect(head.x, head.y, SNAKE_SIZE, SNAKE_SIZE);
  ctx.strokeStyle = '#397d1c';
  ctx.strokeRect(head.x, head.y, SNAKE_SIZE, SNAKE_SIZE);
  // è¡¨æƒ…
  let fx = head.x + 5, fy = head.y + 7;
  ctx.save();
  ctx.fillStyle = '#222';
  if (snakeMood === 'smile') {
    ctx.fillRect(fx, fy, 3, 3);
    ctx.fillRect(fx + 9, fy, 3, 3);
    ctx.beginPath();
    ctx.arc(head.x + SNAKE_SIZE/2, head.y + 16, 5, 0, Math.PI, false);
    ctx.stroke();
    
    // å¢åŠ : å¦‚æœåœ¨æŠ•å–‚ååº†ç¥ï¼Œå¯ä»¥åœ¨å¤´é¡¶æ˜¾ç¤ºçˆ±å¿ƒ
    if (isFeedingSnake) {
      ctx.fillStyle = '#ff7aa0';
      ctx.font = '16px Arial';
      ctx.fillText('â¤ï¸', head.x + SNAKE_SIZE/2 - 8, head.y - 5);
    }
  } else if (snakeMood === 'yum') {
    ctx.fillRect(fx, fy, 3, 3);
    ctx.fillRect(fx + 9, fy, 3, 3);
    ctx.beginPath();
    ctx.moveTo(head.x + 8, head.y + 18);
    ctx.lineTo(head.x + 14, head.y + 22);
    ctx.stroke();
  } else { // normal
    ctx.fillRect(fx + 1, fy, 2, 2);
    ctx.fillRect(fx + 11, fy, 2, 2);
    ctx.fillRect(head.x + SNAKE_SIZE/2 - 1, head.y + 14, 3, 3);
  }
  ctx.restore();
}

// è®©è›‡è‡ªç”±çˆ¬è¡Œ
function animateSnake() {
    const canvas = document.getElementById('snakePet');
    if (!canvas) return;
    const ctx = canvas.getContext('2d');
    // ç§»åŠ¨
    if (!snakeEating && (!snakeTarget || snakeTimer-- < 0)) {
        // éšæœºç›®æ ‡ç‚¹
        snakeTarget = {
            x: SNAKE_MARGIN + Math.random() * (SNAKE_CANVAS_W - SNAKE_SIZE - 2 * SNAKE_MARGIN),
            y: SNAKE_MARGIN + Math.random() * (SNAKE_CANVAS_H - SNAKE_SIZE - 2 * SNAKE_MARGIN)
        };
        snakeTimer = 60 + Math.floor(Math.random() * 80);
    }
    if (!snakeEating && snakeTarget) {
        // å¤´éƒ¨å‘ç›®æ ‡çˆ¬è¡Œ
        let head = snakeBody[0];
        let dx = snakeTarget.x - head.x, dy = snakeTarget.y - head.y;
        let dist = Math.sqrt(dx * dx + dy * dy);
        if (dist > SNAKE_SPEED) {
            let nx = dx / dist, ny = dy / dist;
            let nx2 = head.x + nx * SNAKE_SPEED, ny2 = head.y + ny * SNAKE_SPEED;
            // æ’å…¥æ–°å¤´ï¼Œç§»é™¤æœ«ç«¯
            snakeBody.unshift({ x: nx2, y: ny2 });
            snakeBody.length = snakeLength;
        }
    }
    // éšæœºçœ¨çœ¼
    if (!snakeEating) {
        snakeMood = Math.random() < 0.013 ? 'smile' : 'normal';
    }
    drawSnake(ctx);
    requestAnimationFrame(animateSnake);
}

// å·¥å…·ï¼šè·å–è„‚è‚ªæ¡çš„ä¸­å¿ƒåæ ‡ï¼ˆç›¸å¯¹é¡µé¢å·¦ä¸Šè§’ï¼‰
function getFatBarCenter() {
    const fatBar = document.getElementById('progressFat');
    if (!fatBar) return null;
    const rect = fatBar.getBoundingClientRect();
    return {
        x: rect.left + rect.width * 0.75, // å³ç«¯3/4å¤„ï¼ˆè§†è§‰ç¾è§‚ï¼‰
        y: rect.top + rect.height / 2
    };
}

// å°è›‡åƒè„‚è‚ªåŠ¨ç”»å’Œç”Ÿé•¿
function snakeEatFatIfNeeded() {
  // è¿™ä¸ªå‡½æ•°ç°åœ¨ä¸å†è‡ªåŠ¨è§¦å‘åƒé£Ÿ
  // ä»…æ›´æ–°æŠ•å–‚æŒ‰é’®çŠ¶æ€
  updateFeedButtonState();
}

// ç›‘å¬é¡µé¢æ»šåŠ¨å’Œæ¡å½¢å›¾æ¸²æŸ“
window.addEventListener('scroll', snakeEatFatIfNeeded);
document.addEventListener('DOMContentLoaded', function(){
    setTimeout(snakeEatFatIfNeeded, 1200);
});

// æ–°ä¸€å¤©å½•å…¥ç¬¬ä¸€é¤åæ¢å¤è„‚è‚ªæ¡çŠ¶æ€ï¼Œä½†å°è›‡ç»§ç»­ä¿ç•™èº«é•¿
// åªè¦æ£€æµ‹åˆ°appState.mealsæ—¥æœŸåˆ‡æ¢ï¼ˆæˆ–é•¿åº¦å›åˆ°1ï¼‰ï¼Œåœ¨ updateProgressBars é‡Œå¤„ç†å³å¯
const _updateProgressBars = updateProgressBars;
updateProgressBars = function() {
    // å…ˆæ¢å¤è„‚è‚ªæ¡é¢œè‰²ï¼ˆä½ æ¡å½¢å›¾é€»è¾‘ä¼šè‡ªåŠ¨åˆ·æ–°ï¼Œå®é™…æ— éœ€ç‰¹åˆ«å¤„ç†ï¼‰
    _updateProgressBars.apply(this, arguments);
    // è‹¥å½“å¤©åªå½•å…¥1é¤ï¼Œé‡ç½®â€œè„‚è‚ªæ¡è¢«åƒæ‰â€çš„é€»è¾‘ï¼ˆè›‡èº«é•¿ä¸å˜ï¼‰
    const today = appState.meals.length ? appState.meals[appState.meals.length-1].date : null;
    const mealsToday = appState.meals.filter(m => m.date === today);
    if (mealsToday.length === 1) {
        // è¿™é‡Œå¯ä»¥åšè„‚è‚ªæ¡é—ªä¸€ä¸‹æç¤ºå°è›‡å‡†å¤‡â€œé‡æ–°ç§¯æ”’â€è„‚è‚ª
        // ä¾‹å¦‚è®©è„‚è‚ªæ¡é¢œè‰²é—ªçƒä¸€æ¬¡
        const fatBar = document.getElementById('progressFat');
        if(fatBar){
            fatBar.style.boxShadow = '0 0 12px 6px #ffb861';
            setTimeout(()=>{fatBar.style.boxShadow = '';}, 900);
        }
    }
};
document.addEventListener('DOMContentLoaded', function() { 
    initSnakeBody(snakeLength);
    animateSnake();
});
</script>
<!-- åƒç´ è›‡ç”µå­å® ç‰©ï¼šå§‹ç»ˆæ‚¬æµ®åœ¨é¡µé¢å·¦ä¸‹è§’ï¼Œä¸å½±å“å†…å®¹å¸ƒå±€ -->
<div id="snakePetContainer" style="position:fixed; left:24px; bottom:24px; z-index:1002; pointer-events:none;">
  <canvas id="snakePet" width="480" height="180" style="display:block;"></canvas>
</div>
</body>
</html>